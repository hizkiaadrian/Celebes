(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"13Ib":function(e,t,a){"use strict";a.r(t),a.d(t,"AdminModule",(function(){return z}));var i=a("PCNd"),o=a("tyNb"),r=a("fXoL"),c=a("wZkO");let n=(()=>{class e{constructor(e){this.router=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(o.b))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-admin-dashboard"]],decls:4,vars:2,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","active"]],template:function(e,t){1&e&&(r.Sb(0,"nav",0),r.Sb(1,"a",1),r.Ac(2,"Employees"),r.Rb(),r.Rb(),r.Nb(3,"router-outlet")),2&e&&(r.Bb(1),r.kc("routerLink","list-of-employees")("active",t.router.url.endsWith("list-of-employees")))},directives:[c.b,o.c,c.a,o.e],styles:[""]}),e})();var s=a("AytR"),l=a("tk/3"),b=a("Gme9");let d=(()=>{class e{constructor(e,t){this.httpClient=e,this.authService=t,this.getAllUsers=()=>this.httpClient.get(s.a.backendUrl+"/users/get-all-users",{headers:this.authService.addAuthorizedHeader()}),this.getUserById=e=>this.httpClient.get(`${s.a.backendUrl}/users/get-user/${e}`,{headers:this.authService.addAuthorizedHeader()}),this.approveUser=e=>this.httpClient.patch(`${s.a.backendUrl}/users/approve-user/${e}`,{},{headers:this.authService.addAuthorizedHeader()}),this.updateJobTitle=(e,t)=>this.httpClient.patch(`${s.a.backendUrl}/users/update-job-title/${e}`,{jobTitle:t},{headers:this.authService.addAuthorizedHeader()})}}return e.\u0275fac=function(t){return new(t||e)(r.Wb(l.b),r.Wb(b.a))},e.\u0275prov=r.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=a("qUOr"),p=a("MutI"),m=a("ofXK"),h=a("f0Cb"),f=a("FKr1"),g=a("TU8p");function v(e,t){if(1&e){const e=r.Tb();r.Sb(0,"mat-list-option",5),r.ac("click",(function(){r.rc(e);const a=t.$implicit;return r.ec(2).viewEmployeeDetails(a._id)})),r.Sb(1,"div",6),r.Ac(2),r.Rb(),r.Sb(3,"div",6),r.Ac(4),r.Rb(),r.Rb()}if(2&e){const e=t.$implicit;r.Bb(2),r.Bc(e.name),r.Bb(2),r.Bc(e.role)}}function y(e,t){if(1&e){const e=r.Tb();r.Sb(0,"mat-list-option",7),r.ac("click",(function(){r.rc(e);const a=t.$implicit;return r.ec(2).viewEmployeeDetails(a._id)})),r.Sb(1,"div",6),r.Ac(2),r.Rb(),r.Sb(3,"div",6),r.Ac(4),r.Rb(),r.Rb()}if(2&e){const e=t.$implicit;r.Eb("need-approval",!e.approved),r.kc("matBadge",e.approved?null:"*"),r.Bb(2),r.Bc(e.name),r.Bb(2),r.Bc(e.role)}}function k(e,t){if(1&e&&(r.Sb(0,"mat-selection-list",1),r.Sb(1,"div",2),r.Ac(2,"Managers"),r.Rb(),r.zc(3,v,5,2,"mat-list-option",3),r.Nb(4,"mat-divider"),r.Sb(5,"div",2),r.Ac(6,"Employees"),r.Rb(),r.zc(7,y,5,5,"mat-list-option",4),r.Rb()),2&e){const e=r.ec();r.kc("multiple",!1),r.Bb(3),r.kc("ngForOf",e.managers),r.Bb(4),r.kc("ngForOf",e.employees)}}let S=(()=>{class e{constructor(e,t){this.employeeService=e,this.router=t,this.viewEmployeeDetails=e=>{this.router.navigate(["adminDashboard/employee-details/"+e])}}ngOnInit(){this.employeeService.getAllUsers().subscribe(e=>{this.users=e.users,this.managers=this.users.filter(e=>"Employee"!==e.role),this.employees=this.users.filter(e=>"Employee"===e.role)})}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(d),r.Mb(o.b))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-list-of-employees"]],decls:1,vars:1,consts:[[3,"multiple",4,"appLoading"],[3,"multiple"],["mat-subheader",""],[3,"click",4,"ngFor","ngForOf"],["matBadgeColor","warn",3,"need-approval","matBadge","click",4,"ngFor","ngForOf"],[3,"click"],["mat-line",""],["matBadgeColor","warn",3,"matBadge","click"]],template:function(e,t){1&e&&r.zc(0,k,8,3,"mat-selection-list",0),2&e&&r.kc("appLoading",!t.users)},directives:[u.a,p.f,p.d,m.l,h.a,p.c,f.k,g.a],styles:[".need-approval[_ngcontent-%COMP%]{background-color:rgba(255,0,0,.4)}.need-approval[_ngcontent-%COMP%]:hover{background-color:rgba(255,0,0,.6)}"]}),e})();var R=a("dNgK"),B=a("XiUz"),A=a("Wp6s"),M=a("bTqV"),w=a("3Pt+"),C=a("kmnG"),T=a("qFsG"),x=a("NFeN");function O(e,t){if(1&e){const e=r.Tb();r.Sb(0,"a",14),r.ac("click",(function(){return r.rc(e),r.ec(2).approveUser()})),r.Ac(1,"Approve"),r.Rb()}}function U(e,t){if(1&e){const e=r.Tb();r.Sb(0,"a",15),r.ac("click",(function(){return r.rc(e),r.ec(2).updateJobTitle()})),r.Ac(1,"Submit changes"),r.Rb()}if(2&e){const e=r.ec(2);r.kc("disabled","Unassigned"===e.newJobTitle||e.newJobTitle===e.user.jobTitle)}}function I(e,t){if(1&e){const e=r.Tb();r.Sb(0,"div",1),r.Sb(1,"mat-card",2),r.Sb(2,"div",1),r.Sb(3,"mat-card-header",3),r.Nb(4,"img",4),r.Sb(5,"mat-card-title"),r.Ac(6),r.Rb(),r.Sb(7,"mat-card-subtitle"),r.Ac(8),r.Rb(),r.Rb(),r.Sb(9,"div",5),r.zc(10,O,2,0,"a",6),r.zc(11,U,2,1,"a",7),r.Sb(12,"a",8),r.ac("click",(function(){return r.rc(e),r.ec().goBack()})),r.Ac(13,"Back"),r.Rb(),r.Rb(),r.Rb(),r.Nb(14,"mat-divider"),r.Sb(15,"mat-card-content"),r.Sb(16,"form",9),r.Sb(17,"mat-form-field"),r.Sb(18,"mat-label"),r.Ac(19,"Job title"),r.Rb(),r.Sb(20,"input",10),r.ac("ngModelChange",(function(t){return r.rc(e),r.ec().newJobTitle=t})),r.Rb(),r.Sb(21,"mat-icon",11),r.ac("click",(function(){r.rc(e);const t=r.ec();return t.jobTitleReadonly=!t.jobTitleReadonly})),r.Ac(22,"edit"),r.Rb(),r.Rb(),r.Sb(23,"mat-form-field"),r.Sb(24,"mat-label"),r.Ac(25,"Email"),r.Rb(),r.Nb(26,"input",12),r.Rb(),r.Sb(27,"mat-form-field"),r.Sb(28,"mat-label"),r.Ac(29,"Date of birth"),r.Rb(),r.Nb(30,"input",13),r.fc(31,"date"),r.Rb(),r.Sb(32,"mat-form-field"),r.Sb(33,"mat-label"),r.Ac(34,"Address"),r.Rb(),r.Nb(35,"input",13),r.Rb(),r.Sb(36,"mat-form-field"),r.Sb(37,"mat-label"),r.Ac(38,"Gender"),r.Rb(),r.Nb(39,"input",13),r.fc(40,"titlecase"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()}if(2&e){const e=r.ec();r.Bb(4),r.kc("src",e.user.profilePicUrl||"./assets/default_avatar.png",r.sc),r.Bb(2),r.Bc(e.user.name),r.Bb(2),r.Bc(e.user.role),r.Bb(2),r.kc("ngIf",!e.user.approved),r.Bb(1),r.kc("ngIf",e.user.approved),r.Bb(9),r.kc("ngModel",e.newJobTitle)("readonly",e.jobTitleReadonly),r.Bb(6),r.kc("value",e.user.email),r.Bb(4),r.kc("value",r.hc(31,11,e.user.dateOfBirth,"d MMMM yyyy")||"Not set yet"),r.Bb(5),r.kc("value",e.user.address||"Not set yet"),r.Bb(4),r.kc("value",r.gc(40,14,e.user.gender))}}const J=[{path:"employee-details/:id",component:(()=>{class e{constructor(e,t,a,i){this.location=e,this.activatedRoute=t,this.employeeService=a,this.snackBar=i,this.jobTitleReadonly=!0,this.goBack=()=>this.location.back(),this.approveUser=()=>{this.employeeService.approveUser(this.id).subscribe(e=>{this.snackBar.open(e.msg,"Close",{duration:2e3,panelClass:[e.success?"success-snackbar":"error-snackbar"],horizontalPosition:"end"})}),this.goBack()},this.updateJobTitle=()=>{this.employeeService.updateJobTitle(this.id,this.newJobTitle).subscribe(e=>{this.snackBar.open(e.msg,"Close",{duration:2e3,panelClass:[e.success?"success-snackbar":"error-snackbar"],horizontalPosition:"end"}),e.success&&this.goBack()})}}ngOnInit(){this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.employeeService.getUserById(this.id).subscribe(e=>{e.success?(this.user=e.user,this.newJobTitle=e.user.jobTitle||"Unassigned"):this.snackBar.open(e.msg,"Close",{duration:2e3,panelClass:["error-snackbar"],horizontalPosition:"end"})})}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(m.i),r.Mb(o.a),r.Mb(d),r.Mb(R.a))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-employee-detail"]],decls:1,vars:1,consts:[["fxLayout","column","fxLayoutAlign","start center",4,"appLoading"],["fxLayout","column","fxLayoutAlign","start center"],["fxFlex",""],["fxLayoutAlign","center center"],["mat-card-avatar","","alt","Profile pic",1,"profile-pic",3,"src"],["fxLayoutGap","20px",1,"buttons"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn",3,"click"],["fxLayout","column","fxLayoutGap","10px"],["matInput","","name","newJobTitle",3,"ngModel","readonly","ngModelChange"],["matSuffix","",1,"edit",3,"click"],["matInput","","type","text","readonly","",3,"value"],["matInput","","readonly","",3,"value"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&r.zc(0,I,41,16,"div",0),2&e&&r.kc("appLoading",!t.user)},directives:[u.a,B.c,B.b,A.a,B.a,A.d,A.b,A.g,A.f,B.d,m.m,M.a,h.a,A.c,w.t,w.n,w.o,C.c,C.f,T.b,w.c,w.m,w.p,x.a,C.g],pipes:[m.e,m.s],styles:[".profile-pic[_ngcontent-%COMP%]{width:100px;height:100px}.buttons[_ngcontent-%COMP%]{margin:20px 0}mat-card[_ngcontent-%COMP%]{width:500px}mat-card-content[_ngcontent-%COMP%]{margin:20px 40px}input[_ngcontent-%COMP%]:-moz-read-only{color:#a7a1a1}input[_ngcontent-%COMP%]:read-only{color:#a7a1a1}.edit[_ngcontent-%COMP%]{cursor:pointer}"]}),e})()},{path:"",component:n,children:[{path:"list-of-employees",component:S},{path:"",pathMatch:"full",redirectTo:"list-of-employees"}]}];let P=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(t){return new(t||e)},imports:[[o.d.forChild(J)],o.d]}),e})(),z=(()=>{class e{static forRoot(){return{ngModule:e}}}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(t){return new(t||e)},imports:[[i.a.forRoot(),P]]}),e})()}}]);