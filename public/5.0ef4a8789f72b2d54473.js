(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"13Ib":function(e,t,a){"use strict";a.r(t),a.d(t,"AdminModule",(function(){return z}));var i=a("PCNd"),r=a("tyNb"),c=a("fXoL"),o=a("wZkO");let n=(()=>{class e{constructor(e){this.router=e,this.dashboardTitle="Admin Portal"}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(r.b))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-admin-dashboard"]],decls:6,vars:3,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","active"]],template:function(e,t){1&e&&(c.Sb(0,"h1"),c.Ac(1),c.Rb(),c.Sb(2,"nav",0),c.Sb(3,"a",1),c.Ac(4,"Employees"),c.Rb(),c.Rb(),c.Nb(5,"router-outlet")),2&e&&(c.Bb(1),c.Bc(t.dashboardTitle),c.Bb(2),c.kc("routerLink","list-of-employees")("active",t.router.url.endsWith("list-of-employees")))},directives:[o.b,r.c,o.a,r.e],styles:[""]}),e})();var s=a("2pJz"),l=a("AytR"),b=a("tk/3"),d=a("1q3R");let p=(()=>{class e{constructor(e,t){this.httpClient=e,this.authService=t,this.getAllUsers=()=>this.httpClient.get(l.a.backendUrl+"/users/get-all-users",{headers:this.authService.addAuthorizedHeader()}),this.getUserById=e=>this.httpClient.get(`${l.a.backendUrl}/users/get-user/${e}`,{headers:this.authService.addAuthorizedHeader()}),this.approveUser=e=>this.httpClient.patch(`${l.a.backendUrl}/users/approve-user/${e}`,{},{headers:this.authService.addAuthorizedHeader()}),this.updateJobTitle=(e,t)=>this.httpClient.patch(`${l.a.backendUrl}/users/update-job-title/${e}`,{jobTitle:t},{headers:this.authService.addAuthorizedHeader()})}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(b.b),c.Wb(d.a))},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=a("qUOr"),m=a("MutI"),h=a("ofXK"),f=a("f0Cb"),g=a("FKr1"),v=a("TU8p");function y(e,t){if(1&e){const e=c.Tb();c.Sb(0,"mat-list-option",5),c.ac("click",(function(){c.rc(e);const a=t.$implicit;return c.ec(2).viewEmployeeDetails(a._id)})),c.Sb(1,"div",6),c.Ac(2),c.Rb(),c.Sb(3,"div",6),c.Ac(4),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit;c.Bb(2),c.Bc(e.name),c.Bb(2),c.Bc(e.role)}}function k(e,t){if(1&e){const e=c.Tb();c.Sb(0,"mat-list-option",7),c.ac("click",(function(){c.rc(e);const a=t.$implicit;return c.ec(2).viewEmployeeDetails(a._id)})),c.Sb(1,"div",6),c.Ac(2),c.Rb(),c.Sb(3,"div",6),c.Ac(4),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit;c.Eb("need-approval",!e.approved),c.kc("matBadge",e.approved?null:"*"),c.Bb(2),c.Bc(e.name),c.Bb(2),c.Bc(e.role)}}function S(e,t){if(1&e&&(c.Sb(0,"mat-selection-list",1),c.Sb(1,"div",2),c.Ac(2,"Managers"),c.Rb(),c.zc(3,y,5,2,"mat-list-option",3),c.Nb(4,"mat-divider"),c.Sb(5,"div",2),c.Ac(6,"Employees"),c.Rb(),c.zc(7,k,5,5,"mat-list-option",4),c.Rb()),2&e){const e=c.ec();c.kc("multiple",!1),c.Bb(3),c.kc("ngForOf",e.managers),c.Bb(4),c.kc("ngForOf",e.employees)}}let B=(()=>{class e{constructor(e,t){this.employeeService=e,this.router=t,this.viewEmployeeDetails=e=>{this.router.navigate(["adminDashboard/employee-details/"+e])}}ngOnInit(){this.employeeService.getAllUsers().subscribe(e=>{this.users=e.users,this.managers=this.users.filter(e=>e.role!==s.a.Employee),this.employees=this.users.filter(e=>e.role===s.a.Employee)})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(p),c.Mb(r.b))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-list-of-employees"]],decls:1,vars:1,consts:[[3,"multiple",4,"appLoading"],[3,"multiple"],["mat-subheader",""],[3,"click",4,"ngFor","ngForOf"],["matBadgeColor","warn",3,"need-approval","matBadge","click",4,"ngFor","ngForOf"],[3,"click"],["mat-line",""],["matBadgeColor","warn",3,"matBadge","click"]],template:function(e,t){1&e&&c.zc(0,S,8,3,"mat-selection-list",0),2&e&&c.kc("appLoading",!t.users)},directives:[u.a,m.f,m.d,h.l,f.a,m.c,g.l,v.a],styles:[".need-approval[_ngcontent-%COMP%]{background-color:rgba(255,0,0,.4)}.need-approval[_ngcontent-%COMP%]:hover{background-color:rgba(255,0,0,.6)}"]}),e})();var R=a("FH4G"),A=a("gx82"),M=a("dNgK"),w=a("XiUz"),T=a("Wp6s"),C=a("bTqV"),O=a("3Pt+"),x=a("kmnG"),P=a("qFsG"),U=a("NFeN");function I(e,t){if(1&e){const e=c.Tb();c.Sb(0,"a",14),c.ac("click",(function(){return c.rc(e),c.ec(2).approveUser()})),c.Ac(1,"Approve"),c.Rb()}}function J(e,t){if(1&e){const e=c.Tb();c.Sb(0,"a",15),c.ac("click",(function(){return c.rc(e),c.ec(2).updateJobTitle()})),c.Ac(1,"Submit changes"),c.Rb()}if(2&e){const e=c.ec(2);c.kc("disabled",e.newJobTitle===e.user.jobTitle)}}function L(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",1),c.Sb(1,"mat-card",2),c.Sb(2,"div",1),c.Sb(3,"mat-card-header",3),c.Nb(4,"img",4),c.Sb(5,"mat-card-title"),c.Ac(6),c.Rb(),c.Sb(7,"mat-card-subtitle"),c.Ac(8),c.Rb(),c.Rb(),c.Sb(9,"div",5),c.zc(10,I,2,0,"a",6),c.zc(11,J,2,1,"a",7),c.Sb(12,"a",8),c.ac("click",(function(){return c.rc(e),c.ec().goBack()})),c.Ac(13,"Back"),c.Rb(),c.Rb(),c.Rb(),c.Nb(14,"mat-divider"),c.Sb(15,"mat-card-content"),c.Sb(16,"form",9),c.Sb(17,"mat-form-field"),c.Sb(18,"mat-label"),c.Ac(19,"Job title"),c.Rb(),c.Sb(20,"input",10),c.ac("ngModelChange",(function(t){return c.rc(e),c.ec().newJobTitle=t})),c.Rb(),c.Sb(21,"mat-icon",11),c.ac("click",(function(){c.rc(e);const t=c.ec();return t.jobTitleReadonly=!t.jobTitleReadonly})),c.Ac(22,"edit"),c.Rb(),c.Rb(),c.Sb(23,"mat-form-field"),c.Sb(24,"mat-label"),c.Ac(25,"Email"),c.Rb(),c.Nb(26,"input",12),c.Rb(),c.Sb(27,"mat-form-field"),c.Sb(28,"mat-label"),c.Ac(29,"Date of birth"),c.Rb(),c.Nb(30,"input",13),c.Rb(),c.Sb(31,"mat-form-field"),c.Sb(32,"mat-label"),c.Ac(33,"Address"),c.Rb(),c.Nb(34,"input",13),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.ec();c.Bb(4),c.kc("src",e.profilePicUrl||"./assets/default_avatar.png",c.sc),c.Bb(2),c.Bc(e.user.name),c.Bb(2),c.Bc(e.user.role),c.Bb(2),c.kc("ngIf",!e.user.approved),c.Bb(1),c.kc("ngIf",e.user.approved),c.Bb(9),c.kc("ngModel",e.newJobTitle)("readonly",e.jobTitleReadonly),c.Bb(6),c.kc("value",e.user.email),c.Bb(4),c.kc("value",e.dateOfBirthInputString),c.Bb(4),c.kc("value",e.user.address||"Not set yet")}}const N=[{path:"employee-details/:id",component:(()=>{class e{constructor(e,t,a,i,r){this.location=e,this.activatedRoute=t,this.employeeService=a,this.imagesService=i,this.snackBar=r,this.jobTitleReadonly=!0,this.goBack=()=>this.location.back(),this.approveUser=()=>{this.employeeService.approveUser(this.id).subscribe(e=>{this.snackBar.open(e.msg,"",{panelClass:[e.success?"success-snackbar":"error-snackbar"]})}),this.goBack()},this.updateJobTitle=()=>{this.employeeService.updateJobTitle(this.id,this.newJobTitle).subscribe(e=>{this.snackBar.open(e.msg,"",{panelClass:[e.success?"success-snackbar":"error-snackbar"]}),e.success&&this.goBack()})}}ngOnInit(){this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.employeeService.getUserById(this.id).subscribe(e=>{e.success?(this.user=e.user,this.dateOfBirthInputString=null===this.user.dateOfBirth?"Not set yet":new R.a(this.user.dateOfBirth).displayDate(),this.user.profilePicUrl&&(this.profilePicUrl=this.imagesService.getProfilePicture(this.user.profilePicUrl)),this.newJobTitle=e.user.jobTitle):this.snackBar.open(e.msg,"",{panelClass:["error-snackbar"]})})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(h.i),c.Mb(r.a),c.Mb(p),c.Mb(A.a),c.Mb(M.b))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-employee-detail"]],decls:1,vars:1,consts:[["fxLayout","column","fxLayoutAlign","start center",4,"appLoading"],["fxLayout","column","fxLayoutAlign","start center"],["fxFlex",""],["fxLayoutAlign","center center"],["mat-card-avatar","","alt","Profile pic",1,"profile-pic",3,"src"],["fxLayoutGap","20px",1,"buttons"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn",3,"click"],["fxLayout","column","fxLayoutGap","10px"],["matInput","","name","newJobTitle",3,"ngModel","readonly","ngModelChange"],["matSuffix","",1,"edit",3,"click"],["matInput","","type","text","readonly","",3,"value"],["matInput","","readonly","",3,"value"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&c.zc(0,L,35,10,"div",0),2&e&&c.kc("appLoading",!t.user)},directives:[u.a,w.c,w.b,T.a,w.a,T.d,T.b,T.g,T.f,w.d,h.m,C.a,f.a,T.c,O.t,O.n,O.o,x.d,x.g,P.b,O.c,O.m,O.p,U.a,x.h],styles:[".profile-pic[_ngcontent-%COMP%]{width:100px;height:100px}.buttons[_ngcontent-%COMP%]{margin:20px 0}mat-card[_ngcontent-%COMP%]{width:500px}mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#000;object-fit:cover}mat-card-content[_ngcontent-%COMP%]{margin:20px 40px}input[_ngcontent-%COMP%]:-moz-read-only{color:#a7a1a1}input[_ngcontent-%COMP%]:read-only{color:#a7a1a1}.edit[_ngcontent-%COMP%]{cursor:pointer}"]}),e})()},{path:"",component:n,children:[{path:"list-of-employees",component:B},{path:"",pathMatch:"full",redirectTo:"list-of-employees"},{path:"**",component:a("QdL7").a}]}];let _=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[r.d.forChild(N)],r.d]}),e})(),z=(()=>{class e{static forRoot(){return{ngModule:e}}}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[i.a.forRoot(),_]]}),e})()}}]);