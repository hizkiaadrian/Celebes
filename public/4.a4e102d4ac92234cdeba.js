(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"13Ib":function(e,t,a){"use strict";a.r(t),a.d(t,"AdminModule",(function(){return U}));var i=a("PCNd"),r=a("tyNb"),o=a("fXoL"),n=a("wZkO");let c=(()=>{class e{constructor(e){this.router=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(r.b))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-admin-dashboard"]],decls:4,vars:2,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","active"]],template:function(e,t){1&e&&(o.Sb(0,"nav",0),o.Sb(1,"a",1),o.Ac(2,"Employees"),o.Rb(),o.Rb(),o.Nb(3,"router-outlet")),2&e&&(o.Bb(1),o.kc("routerLink","list-of-employees")("active",t.router.url.endsWith("list-of-employees")))},directives:[n.b,r.c,n.a,r.e],styles:[""]}),e})();var s=a("AytR"),l=a("tk/3"),b=a("1q3R");let d=(()=>{class e{constructor(e,t){this.httpClient=e,this.authService=t,this.getAllUsers=()=>this.httpClient.get(s.a.backendUrl+"/users/get-all-users",{headers:this.authService.addAuthorizedHeader()}),this.getUserById=e=>this.httpClient.get(`${s.a.backendUrl}/users/get-user/${e}`,{headers:this.authService.addAuthorizedHeader()}),this.approveUser=e=>this.httpClient.patch(`${s.a.backendUrl}/users/approve-user/${e}`,{},{headers:this.authService.addAuthorizedHeader()}),this.updateJobTitle=(e,t)=>this.httpClient.patch(`${s.a.backendUrl}/users/update-job-title/${e}`,{jobTitle:t},{headers:this.authService.addAuthorizedHeader()})}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(l.b),o.Wb(b.a))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=a("qUOr"),p=a("MutI"),m=a("ofXK"),h=a("f0Cb"),f=a("FKr1"),g=a("TU8p");function y(e,t){if(1&e){const e=o.Tb();o.Sb(0,"mat-list-option",5),o.ac("click",(function(){o.rc(e);const a=t.$implicit;return o.ec(2).viewEmployeeDetails(a._id)})),o.Sb(1,"div",6),o.Ac(2),o.Rb(),o.Sb(3,"div",6),o.Ac(4),o.Rb(),o.Rb()}if(2&e){const e=t.$implicit;o.Bb(2),o.Bc(e.name),o.Bb(2),o.Bc(e.role)}}function v(e,t){if(1&e){const e=o.Tb();o.Sb(0,"mat-list-option",7),o.ac("click",(function(){o.rc(e);const a=t.$implicit;return o.ec(2).viewEmployeeDetails(a._id)})),o.Sb(1,"div",6),o.Ac(2),o.Rb(),o.Sb(3,"div",6),o.Ac(4),o.Rb(),o.Rb()}if(2&e){const e=t.$implicit;o.Eb("need-approval",!e.approved),o.kc("matBadge",e.approved?null:"*"),o.Bb(2),o.Bc(e.name),o.Bb(2),o.Bc(e.role)}}function k(e,t){if(1&e&&(o.Sb(0,"mat-selection-list",1),o.Sb(1,"div",2),o.Ac(2,"Managers"),o.Rb(),o.zc(3,y,5,2,"mat-list-option",3),o.Nb(4,"mat-divider"),o.Sb(5,"div",2),o.Ac(6,"Employees"),o.Rb(),o.zc(7,v,5,5,"mat-list-option",4),o.Rb()),2&e){const e=o.ec();o.kc("multiple",!1),o.Bb(3),o.kc("ngForOf",e.managers),o.Bb(4),o.kc("ngForOf",e.employees)}}let S=(()=>{class e{constructor(e,t){this.employeeService=e,this.router=t,this.viewEmployeeDetails=e=>{this.router.navigate(["adminDashboard/employee-details/"+e])}}ngOnInit(){this.employeeService.getAllUsers().subscribe(e=>{this.users=e.users,this.managers=this.users.filter(e=>"Employee"!==e.role),this.employees=this.users.filter(e=>"Employee"===e.role)})}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(d),o.Mb(r.b))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-list-of-employees"]],decls:1,vars:1,consts:[[3,"multiple",4,"appLoading"],[3,"multiple"],["mat-subheader",""],[3,"click",4,"ngFor","ngForOf"],["matBadgeColor","warn",3,"need-approval","matBadge","click",4,"ngFor","ngForOf"],[3,"click"],["mat-line",""],["matBadgeColor","warn",3,"matBadge","click"]],template:function(e,t){1&e&&o.zc(0,k,8,3,"mat-selection-list",0),2&e&&o.kc("appLoading",!t.users)},directives:[u.a,p.f,p.d,m.l,h.a,p.c,f.l,g.a],styles:[".need-approval[_ngcontent-%COMP%]{background-color:rgba(255,0,0,.4)}.need-approval[_ngcontent-%COMP%]:hover{background-color:rgba(255,0,0,.6)}"]}),e})();var B=a("dNgK"),R=a("XiUz"),M=a("Wp6s"),w=a("bTqV"),A=a("3Pt+"),C=a("kmnG"),T=a("qFsG"),O=a("NFeN");function x(e,t){if(1&e){const e=o.Tb();o.Sb(0,"a",14),o.ac("click",(function(){return o.rc(e),o.ec(2).approveUser()})),o.Ac(1,"Approve"),o.Rb()}}function I(e,t){if(1&e){const e=o.Tb();o.Sb(0,"a",15),o.ac("click",(function(){return o.rc(e),o.ec(2).updateJobTitle()})),o.Ac(1,"Submit changes"),o.Rb()}if(2&e){const e=o.ec(2);o.kc("disabled",e.newJobTitle===e.user.role||e.newJobTitle===e.user.jobTitle)}}function J(e,t){if(1&e){const e=o.Tb();o.Sb(0,"div",1),o.Sb(1,"mat-card",2),o.Sb(2,"div",1),o.Sb(3,"mat-card-header",3),o.Nb(4,"img",4),o.Sb(5,"mat-card-title"),o.Ac(6),o.Rb(),o.Sb(7,"mat-card-subtitle"),o.Ac(8),o.Rb(),o.Rb(),o.Sb(9,"div",5),o.zc(10,x,2,0,"a",6),o.zc(11,I,2,1,"a",7),o.Sb(12,"a",8),o.ac("click",(function(){return o.rc(e),o.ec().goBack()})),o.Ac(13,"Back"),o.Rb(),o.Rb(),o.Rb(),o.Nb(14,"mat-divider"),o.Sb(15,"mat-card-content"),o.Sb(16,"form",9),o.Sb(17,"mat-form-field"),o.Sb(18,"mat-label"),o.Ac(19,"Job title"),o.Rb(),o.Sb(20,"input",10),o.ac("ngModelChange",(function(t){return o.rc(e),o.ec().newJobTitle=t})),o.Rb(),o.Sb(21,"mat-icon",11),o.ac("click",(function(){o.rc(e);const t=o.ec();return t.jobTitleReadonly=!t.jobTitleReadonly})),o.Ac(22,"edit"),o.Rb(),o.Rb(),o.Sb(23,"mat-form-field"),o.Sb(24,"mat-label"),o.Ac(25,"Email"),o.Rb(),o.Nb(26,"input",12),o.Rb(),o.Sb(27,"mat-form-field"),o.Sb(28,"mat-label"),o.Ac(29,"Date of birth"),o.Rb(),o.Nb(30,"input",13),o.fc(31,"date"),o.Rb(),o.Sb(32,"mat-form-field"),o.Sb(33,"mat-label"),o.Ac(34,"Address"),o.Rb(),o.Nb(35,"input",13),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb()}if(2&e){const e=o.ec();o.Bb(4),o.kc("src",e.user.profilePicUrl||"./assets/default_avatar.png",o.sc),o.Bb(2),o.Bc(e.user.name),o.Bb(2),o.Bc(e.user.role),o.Bb(2),o.kc("ngIf",!e.user.approved),o.Bb(1),o.kc("ngIf",e.user.approved),o.Bb(9),o.kc("ngModel",e.newJobTitle)("readonly",e.jobTitleReadonly),o.Bb(6),o.kc("value",e.user.email),o.Bb(4),o.kc("value",o.hc(31,10,e.user.dateOfBirth,"d MMMM yyyy")||"Not set yet"),o.Bb(5),o.kc("value",e.user.address||"Not set yet")}}const L=[{path:"employee-details/:id",component:(()=>{class e{constructor(e,t,a,i){this.location=e,this.activatedRoute=t,this.employeeService=a,this.snackBar=i,this.jobTitleReadonly=!0,this.goBack=()=>this.location.back(),this.approveUser=()=>{this.employeeService.approveUser(this.id).subscribe(e=>{this.snackBar.open(e.msg,"Close",{duration:2e3,panelClass:[e.success?"success-snackbar":"error-snackbar"],horizontalPosition:"end"})}),this.goBack()},this.updateJobTitle=()=>{this.employeeService.updateJobTitle(this.id,this.newJobTitle).subscribe(e=>{this.snackBar.open(e.msg,"Close",{duration:2e3,panelClass:[e.success?"success-snackbar":"error-snackbar"],horizontalPosition:"end"}),e.success&&this.goBack()})}}ngOnInit(){this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.employeeService.getUserById(this.id).subscribe(e=>{e.success?(this.user=e.user,this.user.dateOfBirth=null===e.user.dateOfBirth?null:new m.e("en-GB").transform(new Date(this.user.dateOfBirth.year,this.user.dateOfBirth.month,this.user.dateOfBirth.date),"d MMMM yyyy"),this.newJobTitle=e.user.jobTitle||e.user.role):this.snackBar.open(e.msg,"Close",{duration:2e3,panelClass:["error-snackbar"],horizontalPosition:"end"})})}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(m.i),o.Mb(r.a),o.Mb(d),o.Mb(B.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-employee-detail"]],decls:1,vars:1,consts:[["fxLayout","column","fxLayoutAlign","start center",4,"appLoading"],["fxLayout","column","fxLayoutAlign","start center"],["fxFlex",""],["fxLayoutAlign","center center"],["mat-card-avatar","","alt","Profile pic",1,"profile-pic",3,"src"],["fxLayoutGap","20px",1,"buttons"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","warn",3,"click"],["fxLayout","column","fxLayoutGap","10px"],["matInput","","name","newJobTitle",3,"ngModel","readonly","ngModelChange"],["matSuffix","",1,"edit",3,"click"],["matInput","","type","text","readonly","",3,"value"],["matInput","","readonly","",3,"value"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&o.zc(0,J,36,13,"div",0),2&e&&o.kc("appLoading",!t.user)},directives:[u.a,R.c,R.b,M.a,R.a,M.d,M.b,M.g,M.f,R.d,m.m,w.a,h.a,M.c,A.t,A.n,A.o,C.c,C.f,T.b,A.c,A.m,A.p,O.a,C.g],pipes:[m.e],styles:[".profile-pic[_ngcontent-%COMP%]{width:100px;height:100px}.buttons[_ngcontent-%COMP%]{margin:20px 0}mat-card[_ngcontent-%COMP%]{width:500px}mat-card-content[_ngcontent-%COMP%]{margin:20px 40px}input[_ngcontent-%COMP%]:-moz-read-only{color:#a7a1a1}input[_ngcontent-%COMP%]:read-only{color:#a7a1a1}.edit[_ngcontent-%COMP%]{cursor:pointer}"]}),e})()},{path:"",component:c,children:[{path:"list-of-employees",component:S},{path:"",pathMatch:"full",redirectTo:"list-of-employees"},{path:"**",component:a("QdL7").a}]}];let P=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[r.d.forChild(L)],r.d]}),e})(),U=(()=>{class e{static forRoot(){return{ngModule:e}}}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[i.a.forRoot(),P]]}),e})()}}]);