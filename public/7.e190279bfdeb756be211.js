(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Lvw3:function(t,e,r){"use strict";r.r(e),r.d(e,"ProfileModule",(function(){return j}));var a=r("tyNb"),i=r("fXoL"),o=r("wZkO");let n=(()=>{class t{constructor(t){this.router=t,this.dashboardTitle="Your Profile"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(a.b))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-profile-dashboard"]],decls:6,vars:3,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","active"]],template:function(t,e){1&t&&(i.Sb(0,"h1"),i.Ac(1),i.Rb(),i.Sb(2,"nav",0),i.Sb(3,"a",1),i.Ac(4,"Profile"),i.Rb(),i.Rb(),i.Nb(5,"router-outlet")),2&t&&(i.Bb(1),i.Bc(e.dashboardTitle),i.Bb(2),i.kc("routerLink","index")("active",e.router.url.endsWith("index")))},directives:[o.b,a.c,o.a,a.e],styles:[""]}),t})();var s=r("3Pt+"),c=r("FKr1"),l=r("wd/R");const d=r.n(l).a||l,u=new i.s("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});function b(t,e){const r=Array(t);for(let a=0;a<t;a++)r[a]=e(a);return r}let f=(()=>{class t extends c.c{constructor(t,e){super(),this._options=e,this.setLocale(t||d.locale())}setLocale(t){super.setLocale(t);let e=d.localeData(t);this._localeData={firstDayOfWeek:e.firstDayOfWeek(),longMonths:e.months(),shortMonths:e.monthsShort(),dates:b(31,t=>this.createDate(2017,0,t+1).format("D")),longDaysOfWeek:e.weekdays(),shortDaysOfWeek:e.weekdaysShort(),narrowDaysOfWeek:e.weekdaysMin()}}getYear(t){return this.clone(t).year()}getMonth(t){return this.clone(t).month()}getDate(t){return this.clone(t).date()}getDayOfWeek(t){return this.clone(t).day()}getMonthNames(t){return"long"==t?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(t){return"long"==t?this._localeData.longDaysOfWeek:"short"==t?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(t){return this.clone(t).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(t){return this.clone(t).daysInMonth()}clone(t){return t.clone().locale(this.locale)}createDate(t,e,r){const a=this._createMoment({year:t,month:e,date:r}).locale(this.locale);return a.isValid(),a}today(){return this._createMoment().locale(this.locale)}parse(t,e){return t&&"string"==typeof t?this._createMoment(t,e,this.locale):t?this._createMoment(t).locale(this.locale):null}format(t,e){return t=this.clone(t),this.isValid(t),t.format(e)}addCalendarYears(t,e){return this.clone(t).add({years:e})}addCalendarMonths(t,e){return this.clone(t).add({months:e})}addCalendarDays(t,e){return this.clone(t).add({days:e})}toIso8601(t){return this.clone(t).format()}deserialize(t){let e;if(t instanceof Date)e=this._createMoment(t).locale(this.locale);else if(this.isDateInstance(t))return this.clone(t);if("string"==typeof t){if(!t)return null;e=this._createMoment(t,d.ISO_8601).locale(this.locale)}return e&&this.isValid(e)?this._createMoment(e).locale(this.locale):super.deserialize(t)}isDateInstance(t){return d.isMoment(t)}isValid(t){return this.clone(t).isValid()}invalid(){return d.invalid()}_createMoment(t,e,r){const{strict:a,useUtc:i}=this._options||{};return i?d.utc(t,e,r,a):d(t,e,r,a)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(c.f,8),i.Wb(u,8))},t.\u0275prov=i.Ib({token:t,factory:t.\u0275fac}),t})();const h={parse:{dateInput:"LL"},display:{dateInput:"D MMMM YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};var p=r("FH4G"),m=r("AytR"),g=r("tk/3"),y=r("1q3R");let v=(()=>{class t{constructor(t,e){this.http=t,this.authService=e,this.editProfile=(t,e)=>this.http.patch(`${m.a.backendUrl}/users/edit-profile/${t}`,{newData:e},{headers:this.authService.addAuthorizedHeader()})}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(g.b),i.Wb(y.a))},t.\u0275prov=i.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=r("0IaG"),k=r("dNgK"),x=r("XiUz"),M=r("kmnG"),R=r("qFsG"),A=r("iadO"),O=r("ofXK"),D=r("bTqV");function B(t,e){1&t&&(i.Sb(0,"mat-error"),i.Ac(1," DoB is required "),i.Rb())}function w(t,e){1&t&&(i.Sb(0,"mat-error"),i.Ac(1," Job title is required "),i.Rb())}function _(t,e){1&t&&(i.Sb(0,"mat-error"),i.Ac(1," Address is required "),i.Rb())}let P=(()=>{class t{constructor(t,e,r,a,i){this.formBuilder=t,this.profileService=e,this.dialogRef=r,this.snackBar=a,this.authService=i}ngOnInit(){this.editProfileForm=this.formBuilder.group({jobTitle:[this.user.jobTitle,[s.s.required]],dateOfBirth:[null===this.user.dateOfBirth?null:new p.a(this.user.dateOfBirth).toDate(),[s.s.required]],address:[this.user.address,[s.s.required]]})}submit(){if(this.editProfileForm.valid){let t={jobTitle:this.editProfileForm.value.jobTitle,dateOfBirth:Object(p.b)(this.editProfileForm.value.dateOfBirth),address:this.editProfileForm.value.address};this.profileService.editProfile(this.user._id,t).subscribe(t=>{t.success?(this.authService.userSubject.next(t.user),this.snackBar.open("Profile edited successfully","",{panelClass:["success-snackbar"]}),this.dialogRef.close()):this.snackBar.open(t.msg,"",{panelClass:["error-snackbar"]})})}}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(s.d),i.Mb(v),i.Mb(S.c),i.Mb(k.b),i.Mb(y.a))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-edit-profile"]],inputs:{user:"user"},features:[i.Ab([{provide:c.c,useClass:f,deps:[c.f]},{provide:c.e,useValue:h}])],decls:25,vars:6,consts:[["fxLayoutAlign","center center"],["fxLayout","column","fxFlex","100%","fxFlex.gt-md","70%",3,"formGroup","ngSubmit"],["matInput","","formControlName","dateOfBirth",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["matInput","","formControlName","jobTitle","type","text"],["matInput","","formControlName","address","type","text"],["fxLayoutAlign","center"],["mat-raised-button","","color","primary","type","submit"]],template:function(t,e){if(1&t&&(i.Sb(0,"div",0),i.Sb(1,"form",1),i.ac("ngSubmit",(function(){return e.submit()})),i.Sb(2,"h2"),i.Ac(3,"Edit profile"),i.Rb(),i.Sb(4,"mat-form-field"),i.Sb(5,"mat-label"),i.Ac(6,"Date of birth"),i.Rb(),i.Nb(7,"input",2),i.Nb(8,"mat-datepicker-toggle",3),i.Nb(9,"mat-datepicker",null,4),i.zc(11,B,2,0,"mat-error",5),i.Rb(),i.Sb(12,"mat-form-field"),i.Sb(13,"mat-label"),i.Ac(14,"Job title"),i.Rb(),i.Nb(15,"input",6),i.zc(16,w,2,0,"mat-error",5),i.Rb(),i.Sb(17,"mat-form-field"),i.Sb(18,"mat-label"),i.Ac(19,"Address"),i.Rb(),i.Nb(20,"input",7),i.zc(21,_,2,0,"mat-error",5),i.Rb(),i.Sb(22,"div",8),i.Sb(23,"button",9),i.Ac(24,"Submit"),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&t){const t=i.pc(10);i.Bb(1),i.kc("formGroup",e.editProfileForm),i.Bb(6),i.kc("matDatepicker",t),i.Bb(1),i.kc("for",t),i.Bb(3),i.kc("ngIf",e.editProfileForm.get("dateOfBirth").hasError("required")),i.Bb(5),i.kc("ngIf",e.editProfileForm.get("jobTitle").hasError("required")),i.Bb(5),i.kc("ngIf",e.editProfileForm.get("address").hasError("required"))}},directives:[x.b,s.t,s.n,x.c,x.a,s.h,M.d,M.g,R.b,s.c,A.b,s.m,s.g,A.d,M.h,A.a,O.m,D.b,M.c],styles:[""]}),t})();var L=r("qUOr"),I=r("f0Cb"),N=r("NFeN");function Y(t,e){if(1&t){const t=i.Tb();i.Sb(0,"div",12),i.Sb(1,"div"),i.Ac(2,"Your account has not been approved. Please contact your manager"),i.Rb(),i.Sb(3,"mat-icon",13),i.ac("click",(function(){return i.rc(t),i.ec(2).closeAlert()})),i.Ac(4,"close"),i.Rb(),i.Rb()}}function C(t,e){if(1&t){const t=i.Tb();i.Sb(0,"div",1),i.Sb(1,"div",2),i.Nb(2,"img",3),i.Sb(3,"div",4),i.Sb(4,"div",5),i.Ac(5),i.Rb(),i.Sb(6,"div",6),i.Ac(7),i.Rb(),i.Rb(),i.Rb(),i.Nb(8,"mat-divider"),i.Sb(9,"div",7),i.Sb(10,"div",8),i.Sb(11,"mat-icon"),i.Ac(12,"email"),i.Rb(),i.Sb(13,"div"),i.Ac(14),i.Rb(),i.Rb(),i.Sb(15,"div",8),i.Sb(16,"mat-icon"),i.Ac(17,"cake"),i.Rb(),i.Sb(18,"div"),i.Ac(19),i.Rb(),i.Rb(),i.Sb(20,"div",8),i.Sb(21,"mat-icon"),i.Ac(22,"location_city"),i.Rb(),i.Sb(23,"div"),i.Ac(24),i.Rb(),i.Rb(),i.Sb(25,"div",9),i.Sb(26,"a",10),i.ac("click",(function(){return i.rc(t),i.ec().editProfile()})),i.Ac(27,"Edit Profile"),i.Rb(),i.Rb(),i.zc(28,Y,5,0,"div",11),i.Rb(),i.Rb()}if(2&t){const t=i.ec();i.Bb(2),i.kc("src",t.user.profilePicUrl||"./assets/default_avatar.png",i.sc),i.Bb(3),i.Bc(t.user.name),i.Bb(2),i.Bc(t.user.jobTitle||t.user.role),i.Bb(7),i.Bc(t.user.email),i.Bb(5),i.Bc(t.dateOfBirthInputString),i.Bb(5),i.Bc(t.user.address||"Not set yet"),i.Bb(4),i.kc("ngIf",!t.user.approved&&t.showAlert)}}const F=[{path:"",component:n,children:[{path:"index",component:(()=>{class t{constructor(t,e){this.authService=t,this.dialog=e,this.showAlert=!0,this.closeAlert=()=>{this.showAlert=!1},this.editProfile=()=>{this.dialog.open(P,{width:"500px"}).componentInstance.user=this.user}}ngOnInit(){this.authService.userSubject.subscribe(t=>{this.user=t,t&&(this.dateOfBirthInputString=null===this.user.dateOfBirth?"Not set yet":new p.a(this.user.dateOfBirth).displayDate())})}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(y.a),i.Mb(S.a))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-display-profile"]],decls:1,vars:1,consts:[["fxFlex","","class","p-40px",4,"appLoading"],["fxFlex","",1,"p-40px"],["fxLayout","row","fxLayoutGap","20px","fxLayoutAlign","start end",1,"mb-20px"],["alt","Profile pic",1,"profile-pic",3,"src"],["fxLayout","column"],[1,"name"],[1,"job-title"],["fxLayout","column","fxLayoutGap","30px",1,"pt-30px"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start end"],["fxLayoutAlign","start"],["mat-raised-button","","color","primary",3,"click"],["class","alert mat-elevation-z8",4,"ngIf"],[1,"alert","mat-elevation-z8"],[1,"clickable",3,"click"]],template:function(t,e){1&t&&i.zc(0,C,29,7,"div",0),2&t&&i.kc("appLoading",!e.user)},directives:[L.a,x.a,x.c,x.d,x.b,I.a,N.a,D.a,O.m],styles:[".profile-pic[_ngcontent-%COMP%]{width:120px;height:120px}.name[_ngcontent-%COMP%]{font-size:40px;font-weight:700}.job-title[_ngcontent-%COMP%]{font-size:15px}.alert[_ngcontent-%COMP%]{background-color:rgba(240,67,54,.8);padding:20px;color:#fff;margin-bottom:15px;display:flex;flex-direction:row;justify-content:space-between;align-content:center}.clickable[_ngcontent-%COMP%]{cursor:pointer}.mb-20px[_ngcontent-%COMP%]{margin-bottom:20px}.pt-30px[_ngcontent-%COMP%]{padding-top:30px}.p-40px[_ngcontent-%COMP%]{padding:40px}"]}),t})()},{path:"",pathMatch:"full",redirectTo:"index"},{path:"**",component:r("QdL7").a}]}];let T=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[a.d.forChild(F)],a.d]}),t})();var W=r("PCNd");let j=(()=>{class t{static forRoot(){return{ngModule:t}}}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[W.a.forRoot(),T]]}),t})()}}]);