(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{bWMj:function(t,e,a){"use strict";a.r(e),a.d(e,"IngredientsManagerModule",(function(){return W}));var n=a("tyNb"),i=a("fXoL"),r=a("wZkO");let s=(()=>{class t{constructor(t){this.router=t,this.dashboardTitle="Ingredients Manager"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(n.b))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-ingredients-manager-dashboard"]],decls:6,vars:3,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","active"]],template:function(t,e){1&t&&(i.Sb(0,"h1"),i.Ac(1),i.Rb(),i.Sb(2,"nav",0),i.Sb(3,"a",1),i.Ac(4,"Library"),i.Rb(),i.Rb(),i.Nb(5,"router-outlet")),2&t&&(i.Bb(1),i.Bc(e.dashboardTitle),i.Bb(2),i.kc("routerLink","library")("active",e.router.url.endsWith("library")))},directives:[r.b,n.d,r.a,n.f],styles:[""]}),t})();var c=a("QdL7"),o=a("3Pt+"),d=a("lJxs"),l=a("JIr8"),b=a("LRne"),g=a("DUNq"),u=a("0IaG"),m=a("dNgK"),p=a("qUOr"),f=a("XiUz"),h=a("kmnG"),S=a("qFsG"),y=a("ofXK"),R=a("bTqV"),C=a("d3UM"),w=a("FKr1");function v(t,e){1&t&&i.Nb(0,"div")}function k(t,e){1&t&&(i.Sb(0,"mat-error"),i.Ac(1," Name is required "),i.Rb())}function I(t,e){if(1&t&&(i.Sb(0,"mat-option",8),i.Ac(1),i.Rb()),2&t){const t=e.$implicit;i.kc("value",t),i.Bb(1),i.Cc(" ",t," ")}}function O(t,e){if(1&t&&(i.Sb(0,"mat-form-field"),i.Sb(1,"mat-label"),i.Ac(2,"Category"),i.Rb(),i.Sb(3,"mat-select",6),i.zc(4,I,2,2,"mat-option",7),i.Rb(),i.Rb()),2&t){const t=i.ec();i.Bb(4),i.kc("ngForOf",t.listOfCategories)}}let B=(()=>{class t{constructor(t,e,a){this.ingredientsService=t,this.dialogRef=e,this.snackBar=a,this.addIngredientsForm=new o.j({name:new o.g("",o.w.required),category:new o.g(null)}),this.isSubmitting=!1}ngOnInit(){this.ingredientsService.getAllCategories().pipe(Object(d.a)(t=>t.categories.map(t=>t.name)),Object(l.a)(t=>Object(b.a)(t))).subscribe(t=>{this.listOfCategories=t,this.addIngredientsForm.patchValue({category:this.listOfCategories[0]})})}submit(){this.isSubmitting=!0,this.ingredientsService.addNewIngredient(this.addIngredientsForm.value).subscribe(t=>{t.success?(this.snackBar.open("Ingredient added successfully","",{panelClass:["success-snackbar"]}),this.isSubmitting=!1,this.dialogRef.close()):(this.snackBar.open(t.msg,"",{panelClass:["error-snackbar"]}),this.isSubmitting=!1)})}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(g.a),i.Mb(u.d),i.Mb(m.b))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-add-ingredients-form"]],decls:14,vars:4,consts:[[4,"appLoading"],["fxLayoutAlign","center"],["fxLayout","column","fxFlex","100%","fxFlex.gt-md","70%",3,"formGroup","ngSubmit"],["matInput","","formControlName","name","type","text"],[4,"ngIf"],["mat-raised-button","","color","primary","type","submit"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(i.zc(0,v,1,0,"div",0),i.Sb(1,"div",1),i.Sb(2,"form",2),i.ac("ngSubmit",(function(){return e.submit()})),i.Sb(3,"h2"),i.Ac(4,"Add a new ingredient"),i.Rb(),i.Sb(5,"mat-form-field"),i.Sb(6,"mat-label"),i.Ac(7,"Name"),i.Rb(),i.Nb(8,"input",3),i.zc(9,k,2,0,"mat-error",4),i.Rb(),i.zc(10,O,5,1,"mat-form-field",4),i.Sb(11,"div",1),i.Sb(12,"button",5),i.Ac(13,"Submit"),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&t&&(i.kc("appLoading",e.isSubmitting),i.Bb(2),i.kc("formGroup",e.addIngredientsForm),i.Bb(7),i.kc("ngIf",null==e.addIngredientsForm.get("name").errors?null:e.addIngredientsForm.get("name").errors.required),i.Bb(1),i.kc("ngIf",e.listOfCategories))},directives:[p.a,f.b,o.x,o.r,f.c,f.a,o.k,h.d,h.g,S.b,o.c,o.q,o.i,y.m,R.b,h.c,C.a,y.l,w.o],styles:[""]}),t})();var A=a("5+tZ");function M(t,e){1&t&&i.Nb(0,"div")}function x(t,e){1&t&&(i.Sb(0,"mat-error"),i.Ac(1," Name is required "),i.Rb())}let N=(()=>{class t{constructor(t,e,a){this.ingredientsService=t,this.dialogRef=e,this.snackBar=a,this.category="",this.isSubmitting=!1}ngOnInit(){}submit(){this.isSubmitting=!0,this.ingredientsService.addNewCategory(this.category).subscribe(t=>{t.success?(this.snackBar.open("Category added successfully","",{panelClass:["success-snackbar"]}),this.dialogRef.close()):(this.snackBar.open(t.msg,"",{panelClass:["error-snackbar"]}),this.isSubmitting=!1)})}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(g.a),i.Mb(u.d),i.Mb(m.b))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-add-category-form"]],decls:13,vars:3,consts:[[4,"appLoading"],["fxLayoutAlign","center"],["fxLayout","column","fxFlex","100%","fxFlex.gt-md","70%",3,"ngSubmit"],["matInput","","name","category","type","text",3,"ngModel","ngModelChange"],[4,"ngIf"],["mat-raised-button","","color","primary","type","submit"]],template:function(t,e){1&t&&(i.zc(0,M,1,0,"div",0),i.Sb(1,"div",1),i.Sb(2,"form",2),i.ac("ngSubmit",(function(){return e.submit()})),i.Sb(3,"h2"),i.Ac(4,"Add a new category"),i.Rb(),i.Sb(5,"mat-form-field"),i.Sb(6,"mat-label"),i.Ac(7,"Name"),i.Rb(),i.Sb(8,"input",3),i.ac("ngModelChange",(function(t){return e.category=t})),i.Rb(),i.zc(9,x,2,0,"mat-error",4),i.Rb(),i.Sb(10,"div",1),i.Sb(11,"button",5),i.Ac(12,"Submit"),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&t&&(i.kc("appLoading",e.isSubmitting),i.Bb(8),i.kc("ngModel",e.category),i.Bb(1),i.kc("ngIf",0===e.category.length))},directives:[p.a,f.b,o.x,o.r,o.s,f.c,f.a,h.d,h.g,S.b,o.c,o.q,o.t,y.m,R.b,h.c],styles:[""]}),t})();var z=a("7EHt"),L=a("+0xr"),P=a("Dh3D"),F=a("M9IT"),j=a("FH4G");function D(t,e){1&t&&(i.Sb(0,"th",11),i.Ac(1,"Item"),i.Rb())}function G(t,e){if(1&t&&(i.Sb(0,"td",12),i.Ac(1),i.Rb()),2&t){const t=e.$implicit;i.Bb(1),i.Bc(t.name)}}function q(t,e){1&t&&(i.Sb(0,"th",11),i.Ac(1,"Last purchased"),i.Rb())}function _(t,e){if(1&t&&(i.Sb(0,"td",12),i.Ac(1),i.Rb()),2&t){const t=e.$implicit;i.Bb(1),i.Bc((null==t.lastPurchased?null:t.lastPurchased.displayDate())||"Not purchased yet")}}function J(t,e){1&t&&i.Nb(0,"tr",13)}function H(t,e){1&t&&i.Nb(0,"tr",14)}function K(t,e){if(1&t&&(i.Sb(0,"tr",15),i.Sb(1,"td",16),i.Ac(2),i.Rb(),i.Rb()),2&t){const t=i.ec(),e=i.pc(4);i.Bb(1),i.kc("colSpan",t.displayedColumns.length),i.Bb(1),i.Bc(0===t.dataSource.data.length?"No entries yet":"No entries match the filter value "+e.value)}}const T=function(){return[5,10]};let Q=(()=>{class t{constructor(){this.displayedColumns=["name","lastPurchased"]}ngOnInit(){this.dataSource=new L.l,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnChanges(){if(this.ingredients.length>0){let t=this.ingredients.map(t=>Object.assign(Object.assign({},t),{lastPurchased:t.lastPurchased?new j.a(t.lastPurchased):null}));this.dataSource=new L.l(t),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}}applyFilter(t){const e=t.target.value;this.dataSource.filterPredicate=function(t,e){return t.name.toLowerCase().includes(e)},this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Gb({type:t,selectors:[["app-ingredients-table"]],viewQuery:function(t,e){var a;1&t&&(i.vc(P.a,!0),i.Ec(F.a,!0)),2&t&&(i.oc(a=i.bc())&&(e.sort=a.first),i.oc(a=i.bc())&&(e.paginator=a.first))},inputs:{ingredients:"ingredients"},features:[i.zb],decls:16,vars:5,consts:[["matInput","","placeholder","Search by keyword",3,"keyup"],["input",""],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastPurchased"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mat-cell",3,"colSpan"]],template:function(t,e){1&t&&(i.Sb(0,"mat-form-field"),i.Sb(1,"mat-label"),i.Ac(2,"Filter"),i.Rb(),i.Sb(3,"input",0,1),i.ac("keyup",(function(t){return e.applyFilter(t)})),i.Rb(),i.Rb(),i.Sb(5,"table",2),i.Qb(6,3),i.zc(7,D,2,0,"th",4),i.zc(8,G,2,1,"td",5),i.Pb(),i.Qb(9,6),i.zc(10,q,2,0,"th",4),i.zc(11,_,2,1,"td",5),i.Pb(),i.zc(12,J,1,0,"tr",7),i.zc(13,H,1,0,"tr",8),i.zc(14,K,3,2,"tr",9),i.Rb(),i.Nb(15,"mat-paginator",10)),2&t&&(i.Bb(5),i.kc("dataSource",e.dataSource),i.Bb(7),i.kc("matHeaderRowDef",e.displayedColumns),i.Bb(1),i.kc("matRowDefColumns",e.displayedColumns),i.Bb(2),i.kc("pageSizeOptions",i.lc(4,T)))},directives:[h.d,h.g,S.b,L.k,P.a,L.c,L.e,L.b,L.g,L.j,L.h,F.a,L.d,P.b,L.a,L.f,L.i],styles:["mat-form-field[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}"]}),t})();function U(t,e){1&t&&i.Nb(0,"div")}function $(t,e){if(1&t&&(i.Sb(0,"mat-expansion-panel"),i.Sb(1,"mat-expansion-panel-header"),i.Sb(2,"mat-panel-title"),i.Ac(3),i.Rb(),i.Sb(4,"mat-panel-description"),i.Ac(5),i.Rb(),i.Rb(),i.Nb(6,"app-ingredients-table",5),i.Rb()),2&t){const t=e.$implicit;i.Bb(3),i.Bc(t.category),i.Bb(2),i.Cc("",t.listOfIngredients.length," entries in this category"),i.Bb(1),i.kc("ingredients",t.listOfIngredients)}}const X=[{path:"",component:s,children:[{path:"library",component:(()=>{class t{constructor(t,e,a){this.ingredientsService=t,this.snackBar=e,this.dialog=a,this.isLoading=!1,this.displayedColumns=["name","lastPurchased"],this.categorizedIngredients=[],this.loadIngredients=()=>{this.ingredientsService.getAllIngredients().subscribe(t=>{t.success?this.categorizedIngredients.map(e=>e.listOfIngredients=t.ingredients.filter(t=>t.category===e.category)):this.snackBar.open(t.msg,"",{panelClass:["error-snackbar"]}),this.isLoading=!1})},this.loadCategorizedIngredients=()=>{this.isLoading=!0,this.ingredientsService.getAllCategories().pipe(Object(d.a)(t=>t.categories.map(t=>t.name)),Object(l.a)(t=>Object(b.a)(t)),Object(A.a)(t=>Object(b.a)(t.map(t=>({category:t,listOfIngredients:[]}))))).subscribe(t=>{this.categorizedIngredients=t,this.loadIngredients()})},this.addNewIngredient=()=>{this.dialog.open(B).afterClosed().subscribe(this.loadCategorizedIngredients)},this.addNewCategory=()=>{this.dialog.open(N).afterClosed().subscribe(this.loadCategorizedIngredients)}}ngOnInit(){this.loadCategorizedIngredients()}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(g.a),i.Mb(m.b),i.Mb(u.b))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-ingredients-library"]],decls:8,vars:2,consts:[[4,"appLoading"],["fxLayout","row","fxLayoutGap","10px",2,"margin","20px"],["mat-raised-button","","color","primary",3,"click"],[1,"accordion-title-align"],[4,"ngFor","ngForOf"],[3,"ingredients"]],template:function(t,e){1&t&&(i.zc(0,U,1,0,"div",0),i.Sb(1,"div",1),i.Sb(2,"a",2),i.ac("click",(function(){return e.addNewIngredient()})),i.Ac(3,"Add a new ingredient"),i.Rb(),i.Sb(4,"a",2),i.ac("click",(function(){return e.addNewCategory()})),i.Ac(5,"Add a new category"),i.Rb(),i.Rb(),i.Sb(6,"mat-accordion",3),i.zc(7,$,7,3,"mat-expansion-panel",4),i.Rb()),2&t&&(i.kc("appLoading",e.isLoading),i.Bb(7),i.kc("ngForOf",e.categorizedIngredients))},directives:[p.a,f.c,f.d,R.a,z.a,y.l,z.c,z.e,z.f,z.d,Q],styles:["table[_ngcontent-%COMP%]{width:100%}.accordion-title-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .accordion-title-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.accordion-title-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}"]}),t})()},{path:"",pathMatch:"full",redirectTo:"library"},{path:"**",component:c.a}]}];let E=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[n.e.forChild(X)],n.e]}),t})();var V=a("PCNd");let W=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[V.a.forRoot(),E]]}),t})()}}]);