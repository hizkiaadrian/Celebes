(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"x+MQ":function(e,t,n){"use strict";n.r(t),n.d(t,"ExpensesManagerModule",(function(){return it}));var a=n("tyNb"),i=n("QdL7"),s=n("+0xr"),o=n("M9IT"),r=n("R0Ic"),c=n("3Pt+"),l=function(e){return e.Kg="kg",e.Pcs="pcs",e.Gram="gram",e.Cc="cc",e.Ml="ml",e.Buah="buah",e}({}),b=n("fXoL"),d=n("1q3R"),p=n("tk/3"),u=n("AytR");let m=(()=>{class e{constructor(e,t){this.httpClient=e,this.authService=t,this.addExpense=e=>this.httpClient.post(u.a.backendUrl+"/expenses/add-expense",e,{headers:this.authService.addAuthorizedHeader()}),this.editExpense=(e,t)=>this.httpClient.patch(`${u.a.backendUrl}/expenses/edit-expense/${t}`,{expense:e},{headers:this.authService.addAuthorizedHeader()}),this.getAllExpenses=()=>this.httpClient.get(u.a.backendUrl+"/expenses/get-all-expenses",{headers:this.authService.addAuthorizedHeader()}),this.deleteExpense=e=>this.httpClient.delete(`${u.a.backendUrl}/expenses/delete-expense/${e}`,{headers:this.authService.addAuthorizedHeader()}),this.getDailyExpensesInDateRange=(e,t)=>this.httpClient.get(u.a.backendUrl+"/expenses/get-daily-expenses-in-range",{headers:this.authService.addAuthorizedHeader(),params:(new p.f).set("startDate",e.toUTCString()).set("endDate",t.toUTCString())}),this.findAllDistinctItems=(e,t)=>this.httpClient.get(u.a.backendUrl+"/expenses/find-all-distinct-items",{headers:this.authService.addAuthorizedHeader(),params:(new p.f).set("startDate",e.toUTCString()).set("endDate",t.toUTCString())}),this.getExpensesByItem=(e,t,n)=>this.httpClient.get(`${u.a.backendUrl}/expenses/get-expenses-by-item/${e}`,{headers:this.authService.addAuthorizedHeader(),params:(new p.f).set("startDate",t.toUTCString()).set("endDate",n.toUTCString())})}}return e.\u0275fac=function(t){return new(t||e)(b.Wb(p.b),b.Wb(d.a))},e.\u0275prov=b.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=n("dNgK"),f=n("0IaG");let g=(()=>{class e{constructor(){this.onAmountChange=(e,t)=>{"amount"==t&&(e.value.pricePerUnit?e.patchValue({totalPrice:e.value.amount*e.value.pricePerUnit}):e.value.totalPrice&&e.patchValue({pricePerUnit:Math.round(e.value.totalPrice/e.value.amount)}))},this.onPricePerUnitChange=(e,t)=>{"pricePerUnit"===t&&e.patchValue({totalPrice:e.value.pricePerUnit*e.value.amount})},this.onTotalPriceChange=(e,t)=>{"totalPrice"===t&&e.value.amount&&e.patchValue({pricePerUnit:Math.round(e.value.totalPrice/e.value.amount)})}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=n("XiUz"),S=n("kmnG"),v=n("qFsG"),R=n("ofXK"),k=n("d3UM"),y=n("bTqV"),C=n("qUOr"),w=n("FKr1");function D(e,t){1&e&&(b.Sb(0,"mat-error"),b.Ac(1," Item is required "),b.Rb())}function P(e,t){1&e&&(b.Sb(0,"mat-error"),b.Ac(1," Supplier is required "),b.Rb())}function A(e,t){1&e&&(b.Sb(0,"mat-error"),b.Ac(1," Amount is required "),b.Rb())}function B(e,t){if(1&e&&(b.Sb(0,"mat-option",16),b.Ac(1),b.Rb()),2&e){const e=t.$implicit;b.kc("value",e),b.Bb(1),b.Cc(" ",e," ")}}function M(e,t){1&e&&(b.Sb(0,"mat-error"),b.Ac(1," Price per unit is required "),b.Rb())}function L(e,t){1&e&&(b.Sb(0,"mat-error"),b.Ac(1," Total price is required "),b.Rb())}function E(e,t){1&e&&b.Nb(0,"div")}let F=(()=>{class e{constructor(e,t,n,a,i,s){this.formBuilder=e,this.authService=t,this.expensesService=n,this.snackBar=a,this.dialogRef=i,this.priceCalculatorService=s,this.isSubmitting=!1,this.onAmountChange=()=>this.priceCalculatorService.onAmountChange(this.expensesForm,this.lastChanged),this.onPricePerUnitChange=()=>this.priceCalculatorService.onPricePerUnitChange(this.expensesForm,this.lastChanged),this.onTotalPriceChange=()=>this.priceCalculatorService.onTotalPriceChange(this.expensesForm,this.lastChanged)}get unitsOfMeasurement(){return Object.values(l)}ngOnInit(){this.subscription=this.authService.userSubject.subscribe(e=>this.loggedInUser=e),this.expensesForm=this.formBuilder.group({item:[this.expense.item,[c.w.required]],supplier:[this.expense.supplier,[c.w.required]],amount:[this.expense.amount,[c.w.required]],unit:[this.expense.unit,[c.w.required]],pricePerUnit:[this.expense.pricePerUnit,[c.w.required]],totalPrice:[this.expense.totalPrice,[c.w.required]]})}ngOnDestroy(){this.subscription.unsubscribe()}changeLastChanged(e){this.lastChanged=e}submit(){this.expensesForm.valid&&(this.isSubmitting=!0,this.expensesService.editExpense({item:this.expensesForm.value.item,supplier:this.expensesForm.value.supplier,amount:this.expensesForm.value.amount,unit:this.expensesForm.value.unit,pricePerUnit:this.expensesForm.value.pricePerUnit,totalPrice:this.expensesForm.value.totalPrice,dateOfExpense:this.expense.dateOfExpense,submittedBy:this.loggedInUser.name,invoiceId:this.expense.invoiceId},this.expense._id).subscribe(e=>{this.snackBar.open(e.msg,"",{panelClass:[e.success?"success-snackbar":"error-snackbar"]}),this.dialogRef.close()},()=>{this.snackBar.open("Something wrong has happened","",{panelClass:["error-snackbar"]}),this.isSubmitting=!1}))}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(c.f),b.Mb(d.a),b.Mb(m),b.Mb(h.b),b.Mb(f.c),b.Mb(g))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-edit-expense-form"]],inputs:{expense:"expense",_id:"_id"},decls:38,vars:8,consts:[["fxFill","","fxLayoutAlign","center center"],["fxLayout","column","fxFlex","100%","fxFlex.gt-md","70%","autocomplete","off",3,"formGroup","ngSubmit"],["matInput","","formControlName","item","type","text"],[4,"ngIf"],["matInput","","formControlName","supplier","type","text"],["fxLayout","row","fxLayoutGap","15px"],["fxFlex",""],["matInput","","formControlName","amount","type","number",3,"focus","ngModelChange"],[1,"auto-width"],["formControlName","unit"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","pricePerUnit","type","number",3,"focus","ngModelChange"],["matInput","","formControlName","totalPrice","type","number",3,"focus","ngModelChange"],["fxLayoutAlign","center"],["mat-raised-button","","color","primary","type","submit"],[4,"appLoading"],[3,"value"]],template:function(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"form",1),b.ac("ngSubmit",(function(){return t.submit()})),b.Sb(2,"h2"),b.Ac(3,"Edit expense"),b.Rb(),b.Sb(4,"mat-form-field"),b.Sb(5,"mat-label"),b.Ac(6,"Item"),b.Rb(),b.Nb(7,"input",2),b.zc(8,D,2,0,"mat-error",3),b.Rb(),b.Sb(9,"mat-form-field"),b.Sb(10,"mat-label"),b.Ac(11,"Supplier"),b.Rb(),b.Nb(12,"input",4),b.zc(13,P,2,0,"mat-error",3),b.Rb(),b.Sb(14,"div",5),b.Sb(15,"mat-form-field",6),b.Sb(16,"mat-label"),b.Ac(17,"Amount"),b.Rb(),b.Sb(18,"input",7),b.ac("focus",(function(){return t.changeLastChanged("amount")}))("ngModelChange",(function(){return t.onAmountChange()})),b.Rb(),b.zc(19,A,2,0,"mat-error",3),b.Rb(),b.Sb(20,"div",8),b.Sb(21,"mat-form-field"),b.Sb(22,"mat-select",9),b.zc(23,B,2,2,"mat-option",10),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(24,"mat-form-field"),b.Sb(25,"mat-label"),b.Ac(26,"Price per unit"),b.Rb(),b.Sb(27,"input",11),b.ac("focus",(function(){return t.changeLastChanged("pricePerUnit")}))("ngModelChange",(function(){return t.onPricePerUnitChange()})),b.Rb(),b.zc(28,M,2,0,"mat-error",3),b.Rb(),b.Sb(29,"mat-form-field"),b.Sb(30,"mat-label"),b.Ac(31,"Total price"),b.Rb(),b.Sb(32,"input",12),b.ac("focus",(function(){return t.changeLastChanged("totalPrice")}))("ngModelChange",(function(){return t.onTotalPriceChange()})),b.Rb(),b.zc(33,L,2,0,"mat-error",3),b.Rb(),b.Sb(34,"div",13),b.Sb(35,"button",14),b.Ac(36,"Submit"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.zc(37,E,1,0,"div",15)),2&e&&(b.Bb(1),b.kc("formGroup",t.expensesForm),b.Bb(7),b.kc("ngIf",t.expensesForm.get("item").hasError("required")),b.Bb(5),b.kc("ngIf",t.expensesForm.get("supplier").hasError("required")),b.Bb(6),b.kc("ngIf",t.expensesForm.get("amount").hasError("required")),b.Bb(4),b.kc("ngForOf",t.unitsOfMeasurement),b.Bb(5),b.kc("ngIf",t.expensesForm.get("pricePerUnit").hasError("required")),b.Bb(5),b.kc("ngIf",t.expensesForm.get("totalPrice").hasError("required")),b.Bb(4),b.kc("appLoading",t.isSubmitting))},directives:[x.e,x.b,c.x,c.r,x.c,x.a,c.k,S.d,S.g,v.b,c.c,c.q,c.i,R.m,x.d,c.u,k.a,R.l,y.b,C.a,S.c,w.o],styles:[".auto-width .mat-form-field,   .auto-width .mat-form-field-infix{width:auto!important}  .auto-width .mat-select-value{max-width:100%;width:auto}"]}),e})();function O(e,t){1&e&&b.Nb(0,"div")}let I=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.expensesService=t,this.snackBar=n,this.isSubmitting=!1}ngOnInit(){}goBack(){this.dialogRef.close()}confirmDelete(){this.isSubmitting=!0,this.expensesService.deleteExpense(this._id).subscribe(e=>{e.success?(this.snackBar.open("Expense deleted successfully","",{panelClass:["success-snackbar"]}),this.dialogRef.close()):(this.snackBar.open(e.msg,"",{panelClass:["error-snackbar"]}),this.isSubmitting=!1)})}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(f.c),b.Mb(m),b.Mb(h.b))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-delete-expense-form"]],inputs:{_id:"_id"},decls:11,vars:1,consts:[[1,"warn-text"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","end end"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[4,"appLoading"]],template:function(e,t){1&e&&(b.Sb(0,"div"),b.Sb(1,"h2"),b.Ac(2,"Delete this entry?"),b.Rb(),b.Sb(3,"div",0),b.Ac(4,"This action cannot be undone"),b.Rb(),b.Sb(5,"div",1),b.Sb(6,"button",2),b.ac("click",(function(){return t.goBack()})),b.Ac(7,"Back"),b.Rb(),b.Sb(8,"button",3),b.ac("click",(function(){return t.confirmDelete()})),b.Ac(9,"Delete"),b.Rb(),b.Rb(),b.Rb(),b.zc(10,O,1,0,"div",4)),2&e&&(b.Bb(10),b.kc("appLoading",t.isSubmitting))},directives:[x.c,x.d,x.b,y.b,C.a],styles:[".warn-text[_ngcontent-%COMP%]{color:red}"]}),e})();var T=n("2pJz");let z=(()=>{class e{constructor(){this.ticksInADay=864e5,this.now=()=>new Date,this.today=()=>this.removeTime(new Date),this.addDays=(e,t)=>new Date(e.getTime()+t*this.ticksInADay),this.removeTime=e=>new Date(e.setHours(0,0,0))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=n("NFeN"),N=n("Qu3c");let _=(()=>{class e{transform(e,...t){return"Rp "+new R.f("en-US").transform(e,"")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=b.Lb({name:"rupiah",type:e,pure:!0}),e})();function G(e,t){1&e&&(b.Sb(0,"th",20),b.Ac(1," Date"),b.Rb())}function j(e,t){if(1&e&&(b.Sb(0,"td",21),b.Ac(1),b.fc(2,"date"),b.Rb()),2&e){const e=t.$implicit;b.Bb(1),b.Bc(b.hc(2,1,e.dateOfExpense,"d MMMM yyyy, HH:mm"))}}function q(e,t){1&e&&(b.Sb(0,"th",20),b.Ac(1," Item"),b.Rb())}function $(e,t){if(1&e&&(b.Sb(0,"td",21),b.Ac(1),b.Rb()),2&e){const e=t.$implicit;b.Bb(1),b.Bc(e.item)}}function W(e,t){1&e&&(b.Sb(0,"th",20),b.Ac(1," Supplier"),b.Rb())}function H(e,t){if(1&e&&(b.Sb(0,"td",21),b.Ac(1),b.Rb()),2&e){const e=t.$implicit;b.Bb(1),b.Bc(e.supplier)}}function Q(e,t){1&e&&(b.Sb(0,"th",20),b.Ac(1," Amount"),b.Rb())}function V(e,t){if(1&e&&(b.Sb(0,"td",21),b.Ac(1),b.Rb()),2&e){const e=t.$implicit;b.Bb(1),b.Dc("",e.amount," ",e.unit,"")}}function K(e,t){1&e&&(b.Sb(0,"th",20),b.Ac(1," Price/Unit"),b.Rb())}function J(e,t){if(1&e&&(b.Sb(0,"td",21),b.Ac(1),b.fc(2,"rupiah"),b.Rb()),2&e){const e=t.$implicit;b.Bb(1),b.Bc(b.gc(2,1,e.pricePerUnit))}}function X(e,t){1&e&&(b.Sb(0,"th",20),b.Ac(1," Total Price"),b.Rb())}function Z(e,t){if(1&e&&(b.Sb(0,"td",21),b.Ac(1),b.fc(2,"rupiah"),b.Rb()),2&e){const e=t.$implicit;b.Bb(1),b.Bc(b.gc(2,1,e.totalPrice))}}function Y(e,t){1&e&&(b.Sb(0,"th",20),b.Ac(1," Submitted by"),b.Rb())}function ee(e,t){if(1&e&&(b.Sb(0,"td",21),b.Ac(1),b.Rb()),2&e){const e=t.$implicit;b.Bb(1),b.Bc(e.submittedBy)}}function te(e,t){if(1&e){const e=b.Tb();b.Sb(0,"td",21),b.Sb(1,"div",22),b.Sb(2,"div",23),b.Sb(3,"div"),b.Ac(4),b.Rb(),b.Rb(),b.Sb(5,"div",24),b.Sb(6,"button",25),b.ac("click",(function(){b.rc(e);const n=t.$implicit;return b.ec(2).openEditExpenseFormDialog(n)})),b.Sb(7,"mat-icon"),b.Ac(8,"edit"),b.Rb(),b.Rb(),b.Sb(9,"div",26),b.Sb(10,"button",27),b.ac("click",(function(){b.rc(e);const n=t.$implicit;return b.ec(2).openDeleteExpenseFormDialog(n._id)})),b.Sb(11,"mat-icon"),b.Ac(12,"delete"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()}if(2&e){const e=t.$implicit,n=b.ec(2);b.Cb("colspan",n.displayedColumns.length),b.Bb(1),b.kc("@detailExpand",e==n.expandedRow?"expanded":"collapsed"),b.Bb(3),b.Cc("Invoice ID: ",e.invoiceId||"No invoice ID",""),b.Bb(5),b.kc("matTooltipDisabled",n.isAuthorizedToDelete)("matTooltipPosition","below"),b.Bb(1),b.kc("disabled",!n.isAuthorizedToDelete)}}function ne(e,t){1&e&&b.Nb(0,"tr",28)}function ae(e,t){if(1&e){const e=b.Tb();b.Sb(0,"tr",29),b.ac("click",(function(){b.rc(e);const n=t.$implicit,a=b.ec(2);return a.expandedRow=a.expandedRow===n?null:n})),b.Rb()}}function ie(e,t){1&e&&b.Nb(0,"tr",30)}function se(e,t){if(1&e&&(b.Sb(0,"tr",31),b.Sb(1,"td",32),b.Ac(2,"No data"),b.Rb(),b.Rb()),2&e){const e=b.ec(2);b.Bb(1),b.kc("colSpan",e.displayedColumns.length)}}const oe=function(){return["expandedDetail"]};function re(e,t){if(1&e&&(b.Sb(0,"table",5),b.Qb(1,6),b.zc(2,G,2,0,"th",7),b.zc(3,j,3,4,"td",8),b.Pb(),b.Qb(4,9),b.zc(5,q,2,0,"th",7),b.zc(6,$,2,1,"td",8),b.Pb(),b.Qb(7,10),b.zc(8,W,2,0,"th",7),b.zc(9,H,2,1,"td",8),b.Pb(),b.Qb(10,11),b.zc(11,Q,2,0,"th",7),b.zc(12,V,2,2,"td",8),b.Pb(),b.Qb(13,12),b.zc(14,K,2,0,"th",7),b.zc(15,J,3,3,"td",8),b.Pb(),b.Qb(16,13),b.zc(17,X,2,0,"th",7),b.zc(18,Z,3,3,"td",8),b.Pb(),b.Qb(19,14),b.zc(20,Y,2,0,"th",7),b.zc(21,ee,2,1,"td",8),b.Pb(),b.Qb(22,15),b.zc(23,te,13,6,"td",8),b.Pb(),b.zc(24,ne,1,0,"tr",16),b.zc(25,ae,1,0,"tr",17),b.zc(26,ie,1,0,"tr",18),b.zc(27,se,3,1,"tr",19),b.Rb()),2&e){const e=b.ec();b.kc("dataSource",e.dataSource),b.Bb(24),b.kc("matHeaderRowDef",e.displayedColumns),b.Bb(1),b.kc("matRowDefColumns",e.displayedColumns),b.Bb(1),b.kc("matRowDefColumns",b.lc(4,oe))}}const ce=function(){return[5,10]};let le=(()=>{class e{constructor(e,t,n,a){this.expensesService=e,this.authService=t,this.dialog=n,this.dateService=a,this.displayedColumns=["date","item","supplier","amount","pricePerUnit","totalPrice","submittedBy"],this.populateDataSourceWithExpenses=()=>{this.expensesService.getAllExpenses().subscribe(e=>{this.dataSource=new s.l(e.expenses),this.dataSource.paginator=this.paginator,this.lastUpdated=this.dateService.now()})}}ngOnInit(){this.populateDataSourceWithExpenses(),this.userSubscription=this.authService.userSubject.subscribe(e=>{e&&(this.isAuthorizedToDelete=this.authService.getUserRole()!==T.a.Employee)})}ngOnDestroy(){this.userSubscription.unsubscribe()}openEditExpenseFormDialog(e){let t=this.dialog.open(F,{width:"500px"});t.componentInstance.expense=e,t.afterClosed().subscribe(this.populateDataSourceWithExpenses)}openDeleteExpenseFormDialog(e){let t=this.dialog.open(I,{width:"500px"});t.componentInstance._id=e,t.afterClosed().subscribe(this.populateDataSourceWithExpenses)}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(m),b.Mb(d.a),b.Mb(f.a),b.Mb(z))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-list-of-expenses"]],viewQuery:function(e,t){var n;1&e&&b.vc(o.a,!0),2&e&&b.oc(n=b.bc())&&(t.paginator=n.first)},decls:7,vars:8,consts:[["fxFlex","","fxLayout","column"],[1,"mat-h3","last-updated"],[1,"table-parent"],["mat-table","","multiTemplateDataRows","",3,"dataSource",4,"appLoading"],[3,"pageSizeOptions","pageSize"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","item"],["matColumnDef","supplier"],["matColumnDef","amount"],["matColumnDef","pricePerUnit"],["matColumnDef","totalPrice"],["matColumnDef","submittedBy"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","clickable",3,"click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","hidden-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["fxLayout","row","fxLayoutAlign","space-evenly center",1,"expanded-row"],[1,"expanded-detail"],["fxLayout","row"],["mat-mini-fab","","color","primary","aria-label","Edit",1,"mr-4px",3,"click"],["matTooltip","Must be a manager or above to delete",3,"matTooltipDisabled","matTooltipPosition"],["mat-mini-fab","","color","warn","aria-label","Delete",3,"disabled","click"],["mat-header-row",""],["mat-row","",1,"clickable",3,"click"],["mat-row","",1,"hidden-row"],[1,"mat-row"],[1,"mat-cell",3,"colSpan"]],template:function(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"h5",1),b.Ac(2),b.fc(3,"date"),b.Rb(),b.Sb(4,"div",2),b.zc(5,re,28,5,"table",3),b.Rb(),b.Nb(6,"mat-paginator",4),b.Rb()),2&e&&(b.Bb(2),b.Cc("Last updated: ",b.hc(3,4,t.lastUpdated,"short"),""),b.Bb(3),b.kc("appLoading",void 0===t.dataSource||0===t.dataSource.data.length),b.Bb(1),b.kc("pageSizeOptions",b.lc(7,ce))("pageSize",10))},directives:[x.a,x.c,C.a,o.a,s.k,s.c,s.e,s.b,s.g,s.j,s.h,s.d,s.a,x.b,y.b,U.a,N.a,s.f,s.i],pipes:[R.e,_],styles:[".table-parent[_ngcontent-%COMP%]{min-width:600px;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}.last-updated[_ngcontent-%COMP%]{margin:20px 0 0 20px}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:auto}.mat-cell[_ngcontent-%COMP%]{text-align:left}.clickable[_ngcontent-%COMP%]{cursor:pointer}.hidden-row[_ngcontent-%COMP%]{height:0}.expanded-row[_ngcontent-%COMP%]{overflow:hidden}.expanded-detail[_ngcontent-%COMP%]{padding:10px 0;margin:50px 0}.mr-4px[_ngcontent-%COMP%]{margin-right:4px}"],data:{animation:[Object(r.n)("detailExpand",[Object(r.k)("collapsed",Object(r.l)({height:"0px",minHeight:"0"})),Object(r.k)("expanded",Object(r.l)({height:"*"})),Object(r.m)("expanded <=> collapsed",Object(r.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),e})();var be=n("wZkO");let de=(()=>{class e{constructor(e,t){this.dialog=e,this.router=t,this.dashboardTitle="Expenses Manager"}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(f.a),b.Mb(a.b))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-dashboard"]],decls:14,vars:6,consts:[["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center"],["mat-button","","color","primary",3,"routerLink"],["aria-label","Add"],[1,"mat-h3"],["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","active"]],template:function(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"h1"),b.Ac(2),b.Rb(),b.Sb(3,"button",1),b.Sb(4,"mat-icon",2),b.Ac(5,"library_add"),b.Rb(),b.Sb(6,"div",3),b.Ac(7,"Add a new expense"),b.Rb(),b.Rb(),b.Rb(),b.Sb(8,"nav",4),b.Sb(9,"a",5),b.Ac(10,"List of Expenses"),b.Rb(),b.Sb(11,"a",5),b.Ac(12,"Charts"),b.Rb(),b.Rb(),b.Nb(13,"router-outlet")),2&e&&(b.Bb(2),b.Bc(t.dashboardTitle),b.Bb(1),b.kc("routerLink","add-new-expense"),b.Bb(6),b.kc("routerLink","list-of-expenses")("active",t.router.url.endsWith("list-of-expenses")),b.Bb(2),b.kc("routerLink","charts")("active",t.router.url.endsWith("charts")))},directives:[x.c,x.d,x.b,y.b,a.c,U.a,be.b,a.d,be.a,a.f],styles:["button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:5px}button[_ngcontent-%COMP%]   .mat-h3[_ngcontent-%COMP%]{display:inline}"]}),e})();var pe=function(e){return e[e.ThisWeek=0]="ThisWeek",e[e.ThisMonth=1]="ThisMonth",e[e.Custom=2]="Custom",e}({}),ue=n("QibW"),me=n("iadO");let he=(()=>{class e{constructor(e,t){this.formBuilder=e,this.dateService=t,this.startDateEmitter=new b.o,this.endDateEmitter=new b.o,this.today=this.dateService.today(),this.lastWeek=this.dateService.addDays(this.today,-7),this.lastMonth=this.dateService.addDays(this.today,-30),this.datePickerForm=this.formBuilder.group({mode:[pe.ThisWeek],startDate:[{value:this.lastWeek,disabled:!0}],endDate:[{value:this.today,disabled:!0}]}),this.emitStartDateInput=()=>{this.startDateEmitter.emit(this.datePickerForm.get("startDate").value)},this.emitEndDateInput=()=>{this.endDateEmitter.emit(this.datePickerForm.get("endDate").value)}}get datepickerMode(){return pe}ngOnInit(){this.emitStartDateInput(),this.emitEndDateInput()}updateDateRangeAndToggleFormDisable(){switch(this.datePickerForm.get("mode").value){case pe.ThisWeek:this.datePickerForm.patchValue({startDate:this.lastWeek,endDate:this.today}),this.datePickerForm.controls.startDate.disable(),this.datePickerForm.controls.endDate.disable();break;case pe.ThisMonth:this.datePickerForm.patchValue({startDate:this.lastMonth,endDate:this.today}),this.datePickerForm.controls.startDate.disable(),this.datePickerForm.controls.endDate.disable();break;case pe.Custom:this.datePickerForm.controls.startDate.enable(),this.datePickerForm.controls.endDate.enable()}}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(c.f),b.Mb(z))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-datepicker"]],outputs:{startDateEmitter:"startDateEmitter",endDateEmitter:"endDateEmitter"},decls:24,vars:9,consts:[["fxLayout","column",1,"pt-20px"],[3,"formGroup"],["formControlName","mode","aria-label","Select an option","fxLayout","row","fxLayoutGap","40px","fxLayoutAlign","center",1,"ml-5px",3,"ngModelChange"],[3,"checked","value"],[3,"value"],["fxLayout","row","fxLayoutGap","20px","fxLayoutAlign","center"],["matInput","","formControlName","startDate",3,"matDatepicker","ngModelChange"],["matSuffix","",3,"for"],["startDatePicker",""],["matInput","","formControlName","endDate",3,"matDatepicker","ngModelChange"],["endDatePicker",""]],template:function(e,t){if(1&e&&(b.Sb(0,"div",0),b.Sb(1,"form",1),b.Sb(2,"mat-radio-group",2),b.ac("ngModelChange",(function(){return t.updateDateRangeAndToggleFormDisable()})),b.Sb(3,"mat-radio-button",3),b.Ac(4,"This week "),b.Rb(),b.Sb(5,"mat-radio-button",4),b.Ac(6,"This month"),b.Rb(),b.Sb(7,"mat-radio-button",4),b.Ac(8,"Custom"),b.Rb(),b.Rb(),b.Sb(9,"div",5),b.Sb(10,"mat-form-field"),b.Sb(11,"mat-label"),b.Ac(12,"Start date"),b.Rb(),b.Sb(13,"input",6),b.ac("ngModelChange",(function(){return t.emitStartDateInput()})),b.Rb(),b.Nb(14,"mat-datepicker-toggle",7),b.Nb(15,"mat-datepicker",null,8),b.Rb(),b.Sb(17,"mat-form-field"),b.Sb(18,"mat-label"),b.Ac(19,"End date"),b.Rb(),b.Sb(20,"input",9),b.ac("ngModelChange",(function(){return t.emitEndDateInput()})),b.Rb(),b.Nb(21,"mat-datepicker-toggle",7),b.Nb(22,"mat-datepicker",null,10),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&e){const e=b.pc(16),n=b.pc(23);b.Bb(1),b.kc("formGroup",t.datePickerForm),b.Bb(2),b.kc("checked",t.datePickerForm.get("mode").value===t.datepickerMode.ThisWeek)("value",t.datepickerMode.ThisWeek),b.Bb(2),b.kc("value",t.datepickerMode.ThisMonth),b.Bb(2),b.kc("value",t.datepickerMode.Custom),b.Bb(6),b.kc("matDatepicker",e),b.Bb(1),b.kc("for",e),b.Bb(6),b.kc("matDatepicker",n),b.Bb(1),b.kc("for",n)}},directives:[x.c,c.x,c.r,c.k,ue.b,c.q,c.i,x.d,x.b,ue.a,S.d,S.g,v.b,c.c,me.b,me.d,S.h,me.a],styles:[".ml-5px[_ngcontent-%COMP%]{margin-left:5px}.pt-20px[_ngcontent-%COMP%]{padding-top:20px}"]}),e})();var fe=n("wd/R"),ge=n("LPYB");const xe=function(){return{borderColor:"black",backgroundColor:"rgba(0,0,0,0)"}},Se=function(e){return[e]};function ve(e,t){if(1&e&&b.Nb(0,"canvas",3),2&e){const e=b.ec(2);b.kc("datasets",e.chartData)("labels",e.chartLabels)("options",e.chartOptions)("colors",b.mc(6,Se,b.lc(5,xe)))("legend",!1)}}function Re(e,t){if(1&e&&(b.Sb(0,"div",1),b.Sb(1,"h4"),b.Ac(2,"Daily expenses"),b.Rb(),b.zc(3,ve,1,8,"canvas",2),b.Rb()),2&e){const e=b.ec();b.Bb(3),b.kc("ngIf",e.chartData)}}let ke=(()=>{class e{constructor(e,t,n){this.expensesService=e,this.dateService=t,this.snackBar=n,this.isLoading=!1,this.expensesData=[],this.chartOptions={responsive:!0,scales:{xAxes:[{scaleLabel:{labelString:"Date",display:!0},ticks:{maxTicksLimit:10}}],yAxes:[{scaleLabel:{labelString:"Amount spent",display:!0},ticks:{maxTicksLimit:10,callback:e=>(new _).transform(e).toString()}}]}},this.updateChartData=()=>{this.isLoading||(this.isLoading=!0,this.expensesService.getDailyExpensesInDateRange(this.startDate,this.endDate).subscribe(e=>{e.success?(this.expensesData=e.expenses.sort(ye),this.chartData=[{data:this.expensesData.map(e=>e.expense)}],this.chartLabels=this.expensesData.map(e=>fe(e.date).format("D MMM"))):this.snackBar.open(e.msg,"",{panelClass:["error-snackbar"]}),this.isLoading=!1}))}}ngOnInit(){}ngOnChanges(){this.startDate&&this.endDate&&this.updateChartData()}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(m),b.Mb(z),b.Mb(h.b))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-daily-expenses-line-chart"]],inputs:{startDate:"startDate",endDate:"endDate"},features:[b.zb],decls:1,vars:1,consts:[["fxFlex","","fxLayout","column","fxLayoutAlign","center center",4,"appLoading"],["fxFlex","","fxLayout","column","fxLayoutAlign","center center"],["baseChart","","chartType","line",3,"datasets","labels","options","colors","legend",4,"ngIf"],["baseChart","","chartType","line",3,"datasets","labels","options","colors","legend"]],template:function(e,t){1&e&&b.zc(0,Re,4,1,"div",0),2&e&&b.kc("appLoading",t.isLoading)},directives:[C.a,x.a,x.c,x.b,R.m,ge.a],styles:[""]}),e})();const ye=(e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime();var Ce=n("2Vo4"),we=n("cp0P"),De=n("lJxs");function Pe(e,t){if(1&e&&b.Nb(0,"canvas",3),2&e){const e=b.ec(2);b.kc("datasets",e.chartData)("labels",e.chartLabels)("options",e.chartOptions)("legend",!1)}}function Ae(e,t){if(1&e&&(b.Sb(0,"div",1),b.Sb(1,"h4"),b.Ac(2,"Expenses by item"),b.Rb(),b.zc(3,Pe,1,4,"canvas",2),b.Rb()),2&e){const e=b.ec();b.Bb(3),b.kc("ngIf",e.chartData)}}let Be=(()=>{class e{constructor(e,t){this.expensesService=e,this.snackBar=t,this.isLoading=!1,this.expensesData=[],this.datasetSubject=new Ce.a(this.expensesData),this.chartData=[{data:this.expensesData.map(e=>e.expense)}],this.chartLabels=this.expensesData.map(e=>e.item),this.chartOptions={responsive:!0,scales:{xAxes:[{scaleLabel:{labelString:"Item",display:!0}}],yAxes:[{scaleLabel:{labelString:"Amount spent",display:!0},ticks:{beginAtZero:!0,maxTicksLimit:10,callback:e=>(new _).transform(e)}}]}},this.updateChartData=()=>{this.isLoading||(this.isLoading=!0,this.expensesData=[],this.datasetSubject.next(this.expensesData),this.expensesService.findAllDistinctItems(this.startDate,this.endDate).subscribe(e=>{e.success?Object(we.a)(e.items.map(e=>this.updateItemData(e))).subscribe(e=>{this.expensesData=e,this.datasetSubject.next(this.expensesData),this.isLoading=!1}):this.snackBar.open(e.msg,"",{panelClass:["error-snackbar"]})}))},this.updateItemData=e=>this.expensesService.getExpensesByItem(e,this.startDate,this.endDate).pipe(Object(De.a)(t=>({item:e,expense:t.expense})))}ngOnInit(){this.subscription=this.datasetSubject.asObservable().subscribe(()=>{this.chartData=[{data:this.expensesData.map(e=>e.expense),backgroundColor:this.expensesData.map(e=>e.expense>1e6?"rgba(200,0,0,0.3)":"rgba(34,139,34,0.3)")}],this.chartLabels=this.expensesData.map(e=>e.item)})}ngOnDestroy(){this.subscription.unsubscribe()}ngOnChanges(){this.startDate&&this.endDate&&this.updateChartData(),console.log("ehy")}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(m),b.Mb(h.b))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-expenses-by-item"]],inputs:{startDate:"startDate",endDate:"endDate"},features:[b.zb],decls:1,vars:1,consts:[["fxFlex","","fxLayout","column","fxLayoutAlign","center center",4,"appLoading"],["fxFlex","","fxLayout","column","fxLayoutAlign","center center"],["baseChart","","chartType","bar",3,"datasets","labels","options","legend",4,"ngIf"],["baseChart","","chartType","bar",3,"datasets","labels","options","legend"]],template:function(e,t){1&e&&b.zc(0,Ae,4,1,"div",0),2&e&&b.kc("appLoading",t.isLoading)},directives:[C.a,x.a,x.c,x.b,R.m,ge.a],styles:[""]}),e})(),Me=(()=>{class e{constructor(){this.listenToStartDate=e=>this.startDate=e,this.listenToEndDate=e=>this.endDate=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Gb({type:e,selectors:[["app-expenses-charts"]],decls:4,vars:4,consts:[["fxFlex","","fxLayout","column","fxLayoutAlign","start center"],[3,"startDateEmitter","endDateEmitter"],[1,"chart",3,"startDate","endDate"]],template:function(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"app-datepicker",1),b.ac("startDateEmitter",(function(e){return t.listenToStartDate(e)}))("endDateEmitter",(function(e){return t.listenToEndDate(e)})),b.Rb(),b.Nb(2,"app-daily-expenses-line-chart",2),b.Nb(3,"app-expenses-by-item",2),b.Rb()),2&e&&(b.Bb(2),b.kc("startDate",t.startDate)("endDate",t.endDate),b.Bb(1),b.kc("startDate",t.startDate)("endDate",t.endDate))},directives:[x.a,x.c,x.b,he,ke,Be],styles:[".chart[_ngcontent-%COMP%]{width:100%;max-width:700px}"]}),e})();var Le=n("gx82"),Ee=n("LRne"),Fe=n("eIep"),Oe=n("pLZG"),Ie=n("xHqg");let Te=(()=>{class e{constructor(e){this.snackBar=e,this.fileEmitter=new b.o,this.selectFile=e=>{this.fileToUpload=null,e.target.files[0]&&0!=e.target.files[0].length?null!=e.target.files[0].type.match(/image\/*/)?(this.fileToUpload=e.target.files[0],this.fileEmitter.emit(this.fileToUpload)):this.snackBar.open("Only images are supported","",{panelClass:["error-snackbar"]}):this.snackBar.open("You must select an image ","",{panelClass:["error-snackbar"]})}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(h.b))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-upload-invoice"]],inputs:{uploadInvoiceForm:"uploadInvoiceForm"},outputs:{fileEmitter:"fileEmitter"},decls:10,vars:2,consts:[["fxLayout","column","fxLayoutGap","10px","fxLayoutAlign","space-evenly start"],["fxLayout","row","fxLayoutGap","20px","fxLayoutAlign","start center"],["mat-flat-button","","color","primary",3,"click"],["type","file","accept","image/jpeg, image/png",1,"input-file",3,"change"],["inputFile",""],["mat-flat-button","","color","primary","matStepperNext","",3,"disabled"]],template:function(e,t){if(1&e){const e=b.Tb();b.Sb(0,"div",0),b.Sb(1,"div",1),b.Sb(2,"button",2),b.ac("click",(function(){return b.rc(e),b.pc(7).click()})),b.Ac(3,"Choose file from device"),b.Rb(),b.Sb(4,"div"),b.Ac(5),b.Rb(),b.Sb(6,"input",3,4),b.ac("change",(function(e){return t.selectFile(e)})),b.Rb(),b.Rb(),b.Sb(8,"button",5),b.Ac(9,"Next"),b.Rb(),b.Rb()}2&e&&(b.Bb(5),b.Bc(null==t.fileToUpload?null:t.fileToUpload.name),b.Bb(3),b.kc("disabled",!t.uploadInvoiceForm.controls.invoice.valid))},directives:[x.c,x.d,x.b,y.b,Ie.c],styles:[".input-file[_ngcontent-%COMP%]{display:none}"]}),e})();function ze(e,t){1&e&&(b.Sb(0,"mat-icon",22),b.Ac(1,"error"),b.Rb())}function Ue(e,t){1&e&&(b.Sb(0,"mat-icon",23),b.Ac(1,"check_circle "),b.Rb())}function Ne(e,t){if(1&e&&(b.Sb(0,"mat-option",24),b.Ac(1),b.Rb()),2&e){const e=t.$implicit;b.kc("value",e),b.Bb(1),b.Cc(" ",e," ")}}function _e(e,t){if(1&e){const e=b.Tb();b.Qb(0,8),b.Sb(1,"tr",9),b.Sb(2,"td",10),b.zc(3,ze,2,0,"mat-icon",11),b.zc(4,Ue,2,0,"mat-icon",12),b.Rb(),b.Sb(5,"td"),b.Sb(6,"div"),b.Nb(7,"input",13),b.Rb(),b.Rb(),b.Sb(8,"td"),b.Sb(9,"div"),b.Nb(10,"input",14),b.Rb(),b.Rb(),b.Sb(11,"td"),b.Sb(12,"div"),b.Sb(13,"input",15),b.ac("focus",(function(){return b.rc(e),b.ec().changeLastChanged("amount")}))("ngModelChange",(function(){b.rc(e);const n=t.index;return b.ec().onAmountChange(n)})),b.Rb(),b.Rb(),b.Rb(),b.Sb(14,"td"),b.Sb(15,"div",16),b.Sb(16,"mat-select",17),b.zc(17,Ne,2,2,"mat-option",18),b.Rb(),b.Rb(),b.Rb(),b.Sb(18,"td"),b.Sb(19,"div"),b.Sb(20,"input",19),b.ac("focus",(function(){return b.rc(e),b.ec().changeLastChanged("pricePerUnit")}))("ngModelChange",(function(){b.rc(e);const n=t.index;return b.ec().onPricePerUnitChange(n)})),b.Rb(),b.Rb(),b.Rb(),b.Sb(21,"td"),b.Sb(22,"div"),b.Sb(23,"input",20),b.ac("focus",(function(){return b.rc(e),b.ec().changeLastChanged("totalPrice")}))("ngModelChange",(function(){b.rc(e);const n=t.index;return b.ec().onTotalPriceChange(n)})),b.Rb(),b.Rb(),b.Rb(),b.Sb(24,"td",10),b.Sb(25,"mat-icon",21),b.ac("click",(function(){b.rc(e);const n=t.index;return b.ec().emitRemoveRow(n)})),b.Ac(26,"delete"),b.Rb(),b.Rb(),b.Rb(),b.Pb()}if(2&e){const e=t.index,n=b.ec();b.Bb(1),b.kc("formGroupName",e),b.Bb(2),b.kc("ngIf",n.addExpensesForm.controls.expenses.controls[e].invalid),b.Bb(1),b.kc("ngIf",n.addExpensesForm.controls.expenses.controls[e].valid),b.Bb(13),b.kc("ngForOf",n.unitsOfMeasurement)}}let Ge=(()=>{class e{constructor(e){this.priceCalculatorService=e,this.addRow=new b.o,this.deleteRow=new b.o,this.emitAddRow=()=>this.addRow.emit(null),this.emitRemoveRow=e=>this.deleteRow.emit(e),this.changeLastChanged=e=>this.lastChanged=e,this.onAmountChange=e=>this.priceCalculatorService.onAmountChange(this.addExpensesForm.controls.expenses.controls[e],this.lastChanged),this.onPricePerUnitChange=e=>this.priceCalculatorService.onPricePerUnitChange(this.addExpensesForm.controls.expenses.controls[e],this.lastChanged),this.onTotalPriceChange=e=>this.priceCalculatorService.onTotalPriceChange(this.addExpensesForm.controls.expenses.controls[e],this.lastChanged)}get unitsOfMeasurement(){return Object.values(l)}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(g))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-add-expenses"]],inputs:{addExpensesForm:"addExpensesForm"},outputs:{addRow:"addRow",deleteRow:"deleteRow"},decls:30,vars:3,consts:[["fxLayout","column","fxLayoutGap","10px","fxLayoutAlign","space-evenly stretch"],["fxFlex","",3,"formGroup"],["formArrayName","expenses",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","end"],["mat-mini-fab","","color","accent",3,"click"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","center center"],["mat-stroked-button","","color","accent","matStepperPrevious","","type","button"],["mat-flat-button","","color","primary","matStepperNext","","type","button",3,"disabled"],["formArrayName","expenses"],[3,"formGroupName"],[1,"table-row-number"],["color","warn",4,"ngIf"],["class","green-check",4,"ngIf"],["formControlName","item","type","text"],["formControlName","supplier","type","text"],["formControlName","amount","type","number",3,"focus","ngModelChange"],[1,"auto-width"],["formControlName","unit"],[3,"value",4,"ngFor","ngForOf"],["formControlName","pricePerUnit","type","number",3,"focus","ngModelChange"],["formControlName","totalPrice","type","number",3,"focus","ngModelChange"],["color","warn",1,"clickable",3,"click"],["color","warn"],[1,"green-check"],[3,"value"]],template:function(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"form",1),b.Sb(2,"table"),b.Sb(3,"thead"),b.Sb(4,"tr"),b.Nb(5,"th"),b.Sb(6,"th"),b.Ac(7,"Item"),b.Rb(),b.Sb(8,"th"),b.Ac(9,"Supplier"),b.Rb(),b.Sb(10,"th"),b.Ac(11,"Amount"),b.Rb(),b.Sb(12,"th"),b.Ac(13,"Unit"),b.Rb(),b.Sb(14,"th"),b.Ac(15,"Price/Unit"),b.Rb(),b.Sb(16,"th"),b.Ac(17,"Total price"),b.Rb(),b.Nb(18,"th"),b.Rb(),b.Rb(),b.Sb(19,"tbody"),b.zc(20,_e,27,4,"ng-container",2),b.Rb(),b.Rb(),b.Rb(),b.Sb(21,"div",3),b.Sb(22,"button",4),b.ac("click",(function(){return t.emitAddRow()})),b.Sb(23,"mat-icon"),b.Ac(24,"add"),b.Rb(),b.Rb(),b.Rb(),b.Sb(25,"div",5),b.Sb(26,"button",6),b.Ac(27,"Previous"),b.Rb(),b.Sb(28,"button",7),b.Ac(29,"Next "),b.Rb(),b.Rb(),b.Rb()),2&e&&(b.Bb(1),b.kc("formGroup",t.addExpensesForm),b.Bb(19),b.kc("ngForOf",t.addExpensesForm.get("expenses").controls),b.Bb(8),b.kc("disabled",!t.addExpensesForm.controls.expenses.valid))},directives:[x.c,x.d,x.b,c.x,c.r,x.a,c.k,R.l,y.b,U.a,Ie.d,Ie.c,c.e,c.l,R.m,c.c,c.q,c.i,c.u,k.a,w.o],styles:["table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #3f51b5}th[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}  .auto-width .mat-select-value{max-width:100%;width:100%;box-sizing:border-box;padding:5px}input[_ngcontent-%COMP%]{font-family:inherit;outline:none;border:0;width:100%;box-sizing:border-box;padding:5px}.table-row-number[_ngcontent-%COMP%]{padding:5px;text-align:center}.clickable[_ngcontent-%COMP%]{cursor:pointer}.green-check[_ngcontent-%COMP%]{color:green}"]}),e})();function je(e,t){if(1&e&&b.Nb(0,"img",3),2&e){const e=b.ec();b.kc("src",e.imageToPreview,b.sc)}}function qe(e,t){if(1&e&&(b.Sb(0,"tbody"),b.Sb(1,"tr"),b.Sb(2,"td",4),b.Ac(3),b.Rb(),b.Sb(4,"td"),b.Ac(5),b.Rb(),b.Sb(6,"td"),b.Ac(7),b.Rb(),b.Sb(8,"td"),b.Ac(9),b.Rb(),b.Sb(10,"td"),b.Ac(11),b.fc(12,"rupiah"),b.Rb(),b.Sb(13,"td"),b.Ac(14),b.fc(15,"rupiah"),b.Rb(),b.Rb(),b.Rb()),2&e){const e=t.$implicit,n=t.index;b.Bb(3),b.Cc(" ",n+1," "),b.Bb(2),b.Bc(e.item),b.Bb(2),b.Bc(e.supplier),b.Bb(2),b.Dc("",e.amount," ",e.unit,""),b.Bb(2),b.Bc(b.gc(12,7,e.pricePerUnit)),b.Bb(3),b.Bc(b.gc(15,9,e.totalPrice))}}let $e=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Gb({type:e,selectors:[["app-form-review"]],inputs:{addExpensesForm:"addExpensesForm",imageToPreview:"imageToPreview"},decls:21,vars:2,consts:[["fxLayout","column","fxLayoutGap","20px"],["alt","Invoice image","class","invoice-preview",3,"src",4,"ngIf"],[4,"ngFor","ngForOf"],["alt","Invoice image",1,"invoice-preview",3,"src"],[1,"table-row-number"]],template:function(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"h4"),b.Ac(2,"Invoice Preview"),b.Rb(),b.zc(3,je,1,1,"img",1),b.Sb(4,"h4"),b.Ac(5,"Transactions"),b.Rb(),b.Sb(6,"table"),b.Sb(7,"thead"),b.Sb(8,"tr"),b.Nb(9,"th"),b.Sb(10,"th"),b.Ac(11,"Item"),b.Rb(),b.Sb(12,"th"),b.Ac(13,"Supplier"),b.Rb(),b.Sb(14,"th"),b.Ac(15,"Amount"),b.Rb(),b.Sb(16,"th"),b.Ac(17,"Price/Unit"),b.Rb(),b.Sb(18,"th"),b.Ac(19,"Total price"),b.Rb(),b.Rb(),b.Rb(),b.zc(20,qe,16,11,"tbody",2),b.Rb(),b.Rb()),2&e&&(b.Bb(3),b.kc("ngIf",t.imageToPreview),b.Bb(17),b.kc("ngForOf",t.addExpensesForm.controls.expenses.value))},directives:[x.c,x.d,R.m,R.l],pipes:[_],styles:["table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #3f51b5}th[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.invoice-preview[_ngcontent-%COMP%]{align-self:center;width:500px;height:auto}.table-row-number[_ngcontent-%COMP%]{padding:5px;text-align:center}"]}),e})();var We=n("Xa2L");let He=(()=>{class e{transform(e,...t){return e>=1e6?(e/1e6).toFixed(1)+" MB":e>=1e3?(e/1e3).toFixed(1)+" KB":e+" B"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=b.Lb({name:"fileSize",type:e,pure:!0}),e})();function Qe(e,t){1&e&&b.Nb(0,"mat-spinner",19)}function Ve(e,t){1&e&&(b.Sb(0,"mat-icon",20),b.Ac(1,"check"),b.Rb())}function Ke(e,t){if(1&e&&(b.Sb(0,"div"),b.Ac(1),b.fc(2,"fileSize"),b.fc(3,"fileSize"),b.Rb()),2&e){const e=b.ec(2);b.Bb(1),b.Dc(" ",b.gc(2,2,e.uploadProgress)," /",b.gc(3,4,e.totalUploadSize),"")}}function Je(e,t){if(1&e&&(b.Sb(0,"div",15),b.zc(1,Qe,1,0,"mat-spinner",16),b.zc(2,Ve,2,0,"mat-icon",17),b.Sb(3,"div"),b.Ac(4,"Uploading invoice"),b.Rb(),b.zc(5,Ke,4,6,"div",18),b.Rb()),2&e){const e=b.ec();b.Bb(1),b.kc("ngIf",e.uploadProgress<e.totalUploadSize),b.Bb(1),b.kc("ngIf",e.uploadProgress===e.totalUploadSize),b.Bb(3),b.kc("ngIf",e.uploadProgress!==e.totalUploadSize)}}function Xe(e,t){1&e&&b.Nb(0,"mat-spinner",19)}function Ze(e,t){1&e&&(b.Sb(0,"mat-icon",20),b.Ac(1,"check"),b.Rb())}function Ye(e,t){if(1&e&&(b.Sb(0,"div"),b.Ac(1),b.Rb()),2&e){const e=b.ec(2);b.Bb(1),b.Dc(" ",e.submittedExpenses,"/",e.totalExpenses,"")}}function et(e,t){if(1&e&&(b.Sb(0,"div",15),b.zc(1,Xe,1,0,"mat-spinner",16),b.zc(2,Ze,2,0,"mat-icon",17),b.Sb(3,"div"),b.Ac(4,"Submitting expenses"),b.Rb(),b.zc(5,Ye,2,2,"div",18),b.Rb()),2&e){const e=b.ec();b.Bb(1),b.kc("ngIf",e.submittedExpenses!==e.totalExpenses),b.Bb(1),b.kc("ngIf",e.submittedExpenses===e.totalExpenses),b.Bb(3),b.kc("ngIf",e.submittedExpenses!==e.totalExpenses)}}const tt=[{path:"add-new-expense",component:(()=>{class e{constructor(e,t,n,a,i,s){this.authService=e,this.imagesService=t,this.expensesService=n,this.snackBar=a,this.router=i,this.location=s,this.disableButton=!1,this.submittedExpenses=0,this.addExpensesForm=new c.j({invoice:new c.g(null,[c.w.required,Object(Le.b)(["png","jpg","jpeg"])]),expenses:new c.d([this.createExpense()],[c.w.required])}),this.takeFile=e=>{this.addExpensesForm.patchValue({invoice:e});let t=new FileReader;t.readAsDataURL(this.addExpensesForm.controls.invoice.value),t.onload=()=>this.imageToUpload=t.result},this.submit=()=>{this.disableButton=!0,this.totalExpenses=this.addExpensesForm.value.expenses.length,this.imagesService.uploadInvoice(this.addExpensesForm.value.invoice).pipe(Object(Fe.a)(e=>e.type===p.d.Response?Object(Ee.a)(e.body):(e.type===p.d.UploadProgress&&(this.uploadProgress=e.loaded,this.totalUploadSize=e.total),Object(Ee.a)(null))),Object(Oe.a)(e=>null!==e),Object(Fe.a)(e=>e.success?Object(Ee.a)(e.invoice):(this.snackBar.open(e.msg,"",{panelClass:["error-snackbar"]}),this.disableButton=!1,Object(Ee.a)(null))),Object(Oe.a)(e=>null!=e)).subscribe(e=>{this.addExpensesForm.value.expenses.map(t=>this.expensesService.addExpense({item:t.item,supplier:t.supplier,amount:t.amount,unit:t.unit,pricePerUnit:t.pricePerUnit,totalPrice:t.totalPrice,dateOfExpense:new Date,submittedBy:this.user.name,invoiceId:e._id}).pipe(Object(Fe.a)(e=>e.success?Object(Ee.a)(e.expense):(this.snackBar.open(e.msg,"",{panelClass:["error-snackbar"]}),this.disableButton=!1,Object(Ee.a)(null))),Object(Oe.a)(e=>null!==e)).subscribe(()=>{this.submittedExpenses++,this.submittedExpenses===this.totalExpenses&&(this.snackBar.open("Expenses submitted successfully","",{panelClass:["success-snackbar"]}),this.router.navigate(["expensesManager"]))}))})},this.goBack=()=>this.location.back()}createExpense(){return new c.j({item:new c.g(void 0,c.w.required),supplier:new c.g(void 0,c.w.required),amount:new c.g(void 0,c.w.required),unit:new c.g(l.Kg),pricePerUnit:new c.g(void 0,c.w.required),totalPrice:new c.g(void 0,c.w.required)})}addRow(){this.addExpensesForm.get("expenses").push(this.createExpense())}deleteRow(e){this.addExpensesForm.get("expenses").removeAt(e)}ngOnInit(){this.userSubscription=this.authService.userSubject.subscribe(e=>this.user=e)}ngOnDestroy(){this.userSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(d.a),b.Mb(Le.a),b.Mb(m),b.Mb(h.b),b.Mb(a.b),b.Mb(R.i))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-add-expense-stepper"]],decls:23,vars:10,consts:[["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center"],["mat-stroked-button","","color","accent",3,"click"],[3,"formGroup"],["linear",""],["label","Upload an invoice",3,"stepControl"],[3,"uploadInvoiceForm","fileEmitter"],["label","Add expenses",3,"stepControl"],[3,"addExpensesForm","addRow","deleteRow"],["label","Review and confirm"],[3,"imageToPreview","addExpensesForm"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","20px"],["fxLayout","row","fxFlex","100%","fxLayoutAlign","center","fxLayoutGap","10px",1,"pt-25px"],["mat-stroked-button","","color","accent","matStepperPrevious",""],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px"],["diameter","14",4,"ngIf"],["class","green-check",4,"ngIf"],[4,"ngIf"],["diameter","14"],[1,"green-check"]],template:function(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"button",1),b.ac("click",(function(){return t.goBack()})),b.Sb(2,"mat-icon"),b.Ac(3,"keyboard_arrow_left"),b.Rb(),b.Ac(4," Back "),b.Rb(),b.Sb(5,"h3"),b.Ac(6,"Add new expenses"),b.Rb(),b.Rb(),b.Sb(7,"form",2),b.Sb(8,"mat-vertical-stepper",3),b.Sb(9,"mat-step",4),b.Sb(10,"app-upload-invoice",5),b.ac("fileEmitter",(function(e){return t.takeFile(e)})),b.Rb(),b.Rb(),b.Sb(11,"mat-step",6),b.Sb(12,"app-add-expenses",7),b.ac("addRow",(function(){return t.addRow()}))("deleteRow",(function(e){return t.deleteRow(e)})),b.Rb(),b.Rb(),b.Sb(13,"mat-step",8),b.Nb(14,"app-form-review",9),b.Sb(15,"div",10),b.Sb(16,"div",11),b.Sb(17,"button",12),b.Ac(18,"Previous"),b.Rb(),b.Sb(19,"button",13),b.ac("click",(function(){return t.submit()})),b.Ac(20,"Submit "),b.Rb(),b.Rb(),b.zc(21,Je,6,3,"div",14),b.zc(22,et,6,3,"div",14),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&e&&(b.Bb(7),b.kc("formGroup",t.addExpensesForm),b.Bb(2),b.kc("stepControl",t.addExpensesForm.controls.invoice),b.Bb(1),b.kc("uploadInvoiceForm",t.addExpensesForm),b.Bb(1),b.kc("stepControl",t.addExpensesForm.controls.expenses),b.Bb(1),b.kc("addExpensesForm",t.addExpensesForm),b.Bb(2),b.kc("imageToPreview",t.imageToUpload)("addExpensesForm",t.addExpensesForm),b.Bb(5),b.kc("disabled",t.disableButton),b.Bb(2),b.kc("ngIf",t.uploadProgress>0),b.Bb(1),b.kc("ngIf",t.uploadProgress>0&&t.uploadProgress===t.totalUploadSize))},directives:[x.c,x.d,x.b,y.b,U.a,c.x,c.r,c.k,Ie.e,Ie.a,Te,Ge,$e,x.a,Ie.d,R.m,We.b],pipes:[He],styles:[".pt-25px[_ngcontent-%COMP%]{padding-top:25px}.green-check[_ngcontent-%COMP%]{color:green}"]}),e})()},{path:"",component:de,children:[{path:"list-of-expenses",component:le},{path:"charts",component:Me},{path:"",pathMatch:"full",redirectTo:"list-of-expenses"},{path:"**",component:i.a}]}];let nt=(()=>{class e{}return e.\u0275mod=b.Kb({type:e}),e.\u0275inj=b.Jb({factory:function(t){return new(t||e)},imports:[[a.e.forChild(tt)],a.e]}),e})();var at=n("PCNd");let it=(()=>{class e{static forRoot(){return{ngModule:e}}}return e.\u0275mod=b.Kb({type:e}),e.\u0275inj=b.Jb({factory:function(t){return new(t||e)},imports:[[at.a.forRoot(),nt]]}),e})()}}]);